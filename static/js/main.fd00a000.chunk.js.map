{"version":3,"sources":["components/utils.js","components/Header.jsx","components/Stage.jsx","components/Legend.jsx","components/Tip.jsx","components/Scatterplot.jsx","components/BarChart.jsx","components/Controls.jsx","components/NoteContext.js","components/Intro.jsx","components/DataTable.jsx","components/Scores.jsx","components/Profile.jsx","components/Survey.jsx","components/Choropleth.jsx","components/Risks.jsx","components/Footer.jsx","App.js","serviceWorker.js","index.js"],"names":["_filterByKey","data","key","value","first","_","cleanHdrLabels","lbl","hdr","cleanIdxLabels","fmt","fmtStr","d","undefined","format","getProfile","filterBy","filterVal","meta","profData","wide","m","val","indicator","display","filterForScatter","filterForBar","region","variable","out","level","getMapData","map","name","keyBy","getQMeta","getRegions","filter","uniq","RegExp","test","filterByString","string","matchKeys","keys","indexOf","compact","createScales","pals","rev","pal","n","groups","length","reverse","colorscale","scaleOrdinal","sizescale","makeChoroScale","scheme","nBrks","vals","mapValues","values","sort","brks","ckmeans","slice","scaleThreshold","domain","range","makeTooltip","Header","props","className","Navbar","expand","variant","bg","Toggle","aria-controls","Collapse","id","Nav","hdrs","h","to","location","Link","title","Stage","type","scatter","bar","table","profile","Card","as","hdrComponents","Body","children","Footer","axisLbl","ChartStage","lbls","TableStage","style","Legend","color","size","margin","transform","left","top","i","fill","cx","cy","r","dx","dy","substring","titleLabel","Tip","tipLblr","vs","content","numFmt","hover","x","y","fillOpacity","strokeOpacity","stroke","Scatterplot","xAccess","yAccess","Vivid","xRange","yRange","right","bottom","points","xAccessor","yAccessor","pointStyle","opacity","xExtent","yExtent","axes","orient","label","baseline","tickFormat","responsiveWidth","foregroundGraphics","hoverAnnotation","svgAnnotationRules","screenCoordinates","tooltipContent","match","join","BarChart","colorVar","labels","rAccess","oAccess","oAccessor","rAccessor","oPadding","oLabel","projection","strokeWidth","annotations","lblRules","pieceHoverAnnotation","IdxBarChart","QBarChart","coords","isNaN","small","ScoreMainControls","register","useFormContext","Form","Row","Col","Group","controlId","Label","Control","ref","onChange","variables","regions","ScoreCompareControls","yvariables","concat","v1","SparkControls","Check","inline","custom","checked","SurveyTopicFragment","Fragment","topics","topicMeta","SurveyMainControls","SurveyProfileControls","categories","Object","e","j","RiskMainControls","NoteContext","React","createContext","noteOpen","handleClose","Intro","Consumer","Alert","dismissible","onClose","Heading","source","intro","escapeHtml","page","href","makeSpark","col","maxes","cell","row","rowIndex","extraData","max","w","width","DataTable","spark","isCommunity","omit","colNames","difference","tblColumns","numberCols","pickBy","c","q","getMaxes","cols","formatter","isNumber","dataField","text","classes","headerClasses","formatExtraData","align","bootstrap4","condensed","bordered","keyField","columns","Scores","index_data","index_comps","formMethods","useForm","mode","flatMap","pull","initValues","v2","useState","setV1","setV2","setRegion","setSpark","onFormChange","getValues","v1Select","v2Select","regSelect","Container","md","handleSubmit","dataBy","target","Profile","headerStyle","Survey","cws_data","topic","group","setTopic","setIndicator","setGroup","topicSelect","qSelect","grpSelect","q0","g0","setValue","qDisplay","groupBy","profileData","denom","Choropleth","getStyle","feature","properties","fillColor","weight","handleFeature","layer","on","featureHilite","featureUnhilite","bindTooltip","direction","offset","setStyle","shp","bbox","geo","b","topojson","getBounds","this","shape","objects","town","Map","bounds","zoomSnap","zoomDelta","scrollWheelZoom","TileLayer","url","attribution","subdomains","minZoom","maxZoom","ext","GeoJSON","interactive","onEachFeature","onClick","Component","Risks","town_data","towns","setTown","mapData","palette","dl","urls","slug","toLowerCase","dw","github","survey","risks","scores","App","obj","download","useLocation","pathname","dl_meta","useDownload","setNoteOpen","v","k","exact","path","render","Provider","cws_meta","intro_txt","bytown","omitBy","town_topo","score_meta","Boolean","window","hostname","ReactDOM","basename","process","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.fd00a000.chunk.js","sourcesContent":["import * as _ from 'lodash';\nimport { scaleOrdinal, scaleThreshold } from 'd3-scale';\nimport wordwrap from 'wordwrapjs';\nimport { format } from 'd3-format';\nimport * as topojson from 'topojson-client';\nimport { ckmeans } from 'simple-statistics';\n\n/////////////// general utilities\nconst _filterByKey = (data, key, value, first = true) => (\n  first ? _.find(data, { [key]: value }) : _.filter(data, { [key]: value })\n);\n\n/////////////// strings\nconst cleanHdrLabels = (lbl, first = true) => {\n  const hdr = _.replace(lbl, /_/g, ' ');\n  return first ? _.upperFirst(hdr) : _.startCase(hdr);\n};\n\nconst cleanIdxLabels = (lbl) => (\n  cleanHdrLabels(lbl, false) + ' Index'\n);\n\nconst cleanKeys = (obj, first = true) => (\n  _.chain(obj)\n    .keys()\n    .map((d) => cleanHdrLabels(d, first = first))\n    .value()\n);\n\nconst titleLabel = (lbl, n = 2) => (\n  _.upperFirst(lbl.substring(n))\n);\n\nconst wrapTspan = (txt) => (\n  wordwrap.lines(txt, { width: 15 })\n);\n\nconst compileHeader = (type) => {\n  const headers = {\n    scatter: '<%= lbls[0] %> vs. <%= lbls[1] %>',\n    bar: '<%= lbls[0] %> by <%= dataBy %>, <%= region %>',\n    table: 'Components of <%= lbls[0] %> by <%= dataBy %>, <%= region %>',\n    profile: '<%= lbls[0] %>, <%= group %>',\n    map: '<%= lbls[0] %> by <%= dataBy %>'\n  };\n  return _.template(headers[type]);\n};\n\nconst fmt = (fmtStr) => (\n  (d) => (d === null || d === undefined ? 'N/A' : format(fmtStr)(d))\n);\n\n/////////////// data munging\n// const getProfile = (data, filterBy, filterVal, meta) => (\n//   _.chain(data)\n//     .find((d) => d.group === group)\n//     .omit(['category', 'group'])\n//     .toPairs()\n//     .map((d) => ({ indicator: d[0], display: getQMeta(meta, d[0]).display, value: d[1] }) )\n//     .orderBy('display')\n//     .value()\n// );\n\nconst getProfile = (data, filterBy, filterVal, meta, omit = null) => {\n  const profData = _filterByKey(data, filterBy, filterVal, true);\n  const wide = _.map(meta, (m) => {\n    const format = m.format || '0.0%';\n    const val = fmt(format)(profData[m.indicator]);\n    return {\n      indicator: m.display,\n      value: val\n    };\n  });\n  return wide;\n};\n\nconst filterForScatter = (data) => (\n  _filterByKey(data, 'category', 'Total', false)\n);\n\nconst filterForBar = (data, region, variable) => {\n  let out;\n  if (variable === 'community') {\n    if (region === 'Connecticut') {\n      out = _.filter(data, (d) => _.includes(['1_state', '2_region'], d.level));\n    } else {\n      out =  _.filter(data, (d) => _.includes([region, 'Connecticut'], d.region));\n    }\n    out = _.filter(out, { 'category': 'Total' });\n  } else {\n    out = _.filter(data, { 'name': region });\n  }\n  return out;\n};\n\nconst getMapData = (data, indicator) => (\n  _.chain(data)\n    .map((d) => ({\n      name: d.name,\n      value: d[indicator]\n    }))\n    .keyBy('name')\n    .value()\n);\n\nconst filterTownLvl = (data) => (\n  _.chain(data)\n    .mapValues((v, k) => _.filter(v, (d) => d.bytown))\n    .omitBy(_.isEmpty)\n    .value()\n);\n\n/////////////// metadata\nconst getVariables = (data) => (\n  _.chain(data)\n    .flatMap(_.keys)\n    .uniq()\n    .pull('name', 'category', 'group', 'level', 'region')\n    .sort()\n    .reverse()\n    .value()\n);\n\nconst getSubVariables = (variables, v1) => (\n  _.without(variables, v1)\n);\n\nconst getComparables = (variables) => (\n  _.drop(variables, 1).concat(_.take(variables, 1))\n);\n\nconst getQMeta = (meta, indicator) => (\n  _filterByKey(meta, 'indicator', indicator, true)\n);\n\nconst getRegions = (data) => (\n  _.chain(data)\n    .filter((d) => _.includes(['1_state', '2_region'], d.level))\n    .map('name')\n    .uniq()\n    // .filter((d) => d.search(/(Inner|Outer) Ring/) === -1)\n    .filter((d) => !RegExp('(Inner|Outer) Ring').test(d))\n    .value()\n);\n\nconst getNestedGrps = (data) => (\n  _.chain(data)\n    .groupBy('category')\n    .mapValues((d) => _.map(d, 'group'))\n    .value()\n);\n\nconst tblColumns = (row, omit) => (\n  _.chain(row)\n    .keys()\n    .difference(omit)\n    .value()\n);\n\nconst objToArray = (obj, key, value) => {\n  return _.chain(obj)\n    .mapValues((v, k) => ({ [key]: k, [value]: v }))\n    .values()\n    .value();\n};\n\nconst filterByString = (meta, string) => {\n  const matchKeys = _.chain(meta)\n    .keys()\n    .map((d) => d.indexOf(string) >= 0 ? d : false)\n    .compact()\n    .value();\n  return _.pick(meta, matchKeys);\n};\n\n\n\n/////////////// viz\nconst createScales = (data, pals, variable, rev) => {\n  const n = _.size(pals);\n  const groups = _.chain(data)\n    .map(variable)\n    .uniq()\n    .value();\n  let pal;\n  if (rev) {\n    pal = _.takeRight(pals[n], groups.length).reverse();\n  } else {\n    pal = _.take(pals[n], groups.length);\n  }\n  // let pal = rev ? _.takeRight(pals[n], groups.length) : _.take(pals[n], groups.length);\n  const color = scaleOrdinal(groups, pal);\n  const rad = scaleOrdinal(groups, [8, 7, 5, 3, 3, 3]);\n  return { colorscale: color, sizescale: rad };\n};\n\nconst getMaxes = (data) => {\n  // const numberCols = _.pickBy(data[0], _.isNumber);\n  const numberCols = _.chain(data[0])\n    .pickBy(_.isNumber)\n    .keys()\n    .value();\n  return _.chain(numberCols)\n    .map((c) => ({\n      q: c,\n      max: _.chain(data).map(c).max().value()\n    }))\n    .keyBy('q')\n    .mapValues('max')\n    .value();\n};\n\nconst makeChoroScale = (data, scheme, nBrks) => {\n  const vals = _.chain(data)\n    .mapValues('value')\n    .values()\n    .sort()\n    .value();\n  if (!vals.length) {\n    return scaleThreshold().domain([0, 1]).range(['#ccc']);\n  } else {\n    const brks = ckmeans(vals, nBrks).map((d) => d[0]).slice(1);\n    return scaleThreshold()\n      .domain(brks)\n      .range(scheme[nBrks]);\n  }\n};\n\nconst makeTooltip = (name, value, format) => (\n  `${ name }: ${ fmt(format)(value) }`\n);\n\n/////////////////// geography\nconst getBounds = (geo) => {\n  const b = topojson.bbox(geo);\n  return [[ b[1], b[0] ], [ b[3], b[2] ]];\n};\n\nconst makeGeoJson = (shp) => (\n  topojson.feature(shp, shp.objects.town)\n);\n\n\nexport{\n\tcleanIdxLabels,\n\tcompileHeader,\n\tcreateScales,\n\tfilterForScatter,\n\tgetRegions,\n\tgetVariables,\n  cleanHdrLabels,\n  cleanKeys,\n  filterByString,\n  filterForBar,\n  filterTownLvl,\n  fmt,\n  getBounds,\n  getComparables,\n  getMapData,\n  getMaxes,\n  getNestedGrps,\n  getProfile,\n  getQMeta,\n  getSubVariables,\n  makeChoroScale,\n  makeGeoJson,\n  makeTooltip,\n  objToArray,\n  tblColumns,\n  titleLabel,\n  wrapTspan\n};\n","import React from 'react';\nimport { Navbar, Nav } from 'react-bootstrap';\nimport { LinkContainer } from 'react-router-bootstrap';\n\nimport '../styles/Header.css';\n\nconst Header = (props) => (\n  <div className='Header'>\n    <Navbar expand='md' variant='light' bg='light'>\n      <Navbar.Toggle aria-controls='basic-navbar-nav' />\n      <Navbar.Collapse id='basic-navbar-nav'>\n        <Nav variant='pills'>\n          { props.hdrs.map((h) => (\n            <LinkContainer to={ '/' + h.location } key={ `page-${ h.location }` }>\n              <Nav.Link>{ h.title }</Nav.Link>\n            </LinkContainer>\n          )) }\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  </div>\n);\n\nexport default Header;\n","import React from 'react';\nimport { Card } from 'react-bootstrap';\n\nimport '../styles/Stage.css';\nimport { cleanHdrLabels, compileHeader } from './utils.js';\n\n\n\nconst Stage = (props) => {\n  const hdr = compileHeader(props.type)({ ...props });\n\n  return (\n    <Card>\n      <Card.Header as='h3'>\n        { hdr }\n        { props.hdrComponents || null }\n      </Card.Header>\n      <Card.Body>\n        { props.children }\n      </Card.Body>\n      <Card.Footer className='text-right axis-title'>{ props.axisLbl || null }</Card.Footer>\n    </Card>\n  );\n};\n\nconst ChartStage = (props) => (\n  <div className='Stage ChartStage'>\n    <Stage\n      lbls={ props.lbls.map((d) => d || cleanHdrLabels(d)) }\n      { ...props }\n    />\n  </div>\n);\n\n\nconst TableStage = (props) => (\n  <div className={ props.style ? 'Stage TableStage ' + props.style : 'Stage TableStage' }>\n    <Stage\n      type={ props.type || 'table' }\n      { ...props }\n    />\n  </div>\n);\n\n\nexport { ChartStage, TableStage };\n","import React from 'react';\nimport { titleLabel } from './utils.js';\n\nimport '../styles/Legend.css';\n\nconst Legend = ({ color, size, margin }) => {\n  return (\n    <g className='Legend' id='legend' transform={ `translate(${ margin.left + 10 },${ margin.top + 10 })` }>\n      { color.domain().map((d, i) => (\n        <g key={ `legendline-${ i }` } transform={ `translate(0,${ i * 15 })` }>\n          <circle fill={ color(d) } cx='0' cy='0' r={ size(d) - 1 } />\n          <text key={ `legendtxt-${ i }` } dx='0.6em' dy='0.28em'>\n            { titleLabel(d) }\n          </text>\n        </g>\n      )) }\n    </g>\n  );\n};\n\nexport default Legend;\n","import React from 'react';\n\nimport '../styles/Tooltip.css';\n\nconst Tip = (props) => {\n  const lbls = props.tipLblr ? props.vs.map(props.tipLblr) : props.vs;\n  const content = props.vs.map((d, i) => (\n    <div key={ `tip-div${ i }` }>\n      <p key={ `tip-p${ i }` }><span key={ `tip${ i }` }>{ lbls[i].length ? `${ lbls[i] }: ` : '' } </span>{ props.numFmt(props.data[d]) }</p>\n    </div>\n));\n\n  return (\n    <div className='Tooltip'>\n      <h5>{ props.data[props.hdr] }</h5>\n      { content }\n    </div>\n  );\n};\n\nexport default Tip;\n","import React from 'react';\nimport { ResponsiveXYFrame } from 'semiotic';\nimport { Vivid } from 'cartocolor';\nimport * as _ from 'lodash';\n\nimport Legend from './Legend';\nimport Tip from './Tip';\nimport '../styles/Chart.css';\n\nimport { cleanIdxLabels, createScales } from './utils.js';\n\nconst Scatterplot = (props) => {\n  const [xAccess, yAccess] = props.vs;\n  const { colorscale, sizescale } = createScales(props.data, Vivid, 'level', false);\n\n  const xRange = [_.min(_.map(props.data, xAccess)), _.max(_.map(props.data, xAccess))];\n  const yRange = [_.min(_.map(props.data, yAccess)), _.max(_.map(props.data, yAccess))];\n  const pad = 0.05;\n  const margin = { top: 10, right: 10, bottom: 60, left: 80 };\n  const fmt = props.numFmt || ((d) => d);\n\n  return (\n    <div className='Chart'>\n      <ResponsiveXYFrame\n        points={ props.data }\n        margin={ margin }\n        size={ [600, 500] }\n        xAccessor={ xAccess }\n        yAccessor={ yAccess }\n        pointStyle={ (d) => ({\n          fill: colorscale(d.level),\n          stroke: colorscale(d.level),\n          r: sizescale(d.level),\n          opacity: 0.8\n        }) }\n        xExtent={ [xRange[0] * (1 - pad), xRange[1] * (1 + pad)] }\n        yExtent={ [yRange[0] * (1 - pad), yRange[1] * (1 + pad)] }\n        axes={[\n          { orient: 'left', label: cleanIdxLabels(yAccess), baseline: 'under', tickFormat: fmt },\n          { orient: 'bottom', label: cleanIdxLabels(xAccess), baseline: 'under', tickFormat: fmt }\n        ]}\n        responsiveWidth={ true }\n        foregroundGraphics={ <Legend color={ colorscale } size={ sizescale } margin={ margin } /> }\n        hoverAnnotation={ [(d) => ({\n          type: 'frame-hover',\n          color: colorscale(d.level)\n        })] }\n        svgAnnotationRules={ ({ screenCoordinates, d }) => (d && d.type === 'frame-hover') ? hover(d, screenCoordinates[0], screenCoordinates[1], colorscale) : null }\n        tooltipContent={ (d) => (\n          <Tip data={ d.data } type='scatter'\n            vs={ props.vs }\n            hdr='name'\n            tipLblr={ (d) => cleanIdxLabels(d).match(/[A-Z]/g).join('') }\n            numFmt={ fmt }\n          />\n        ) }\n      />\n    </div>\n  )\n};\n\n\nconst hover = (d, x, y, color) => (\n  <g key={ `${ hover }-tip` } className='hover-circle'>\n    <circle\n      cx={ x }\n      cy={ y }\n      r={ 12 }\n      fillOpacity={ 1.0 }\n      strokeOpacity={ 1.0 }\n      stroke={ color(d.level) }\n      fill={ color(d.level) }\n    ></circle>\n  </g>\n);\n\nexport default Scatterplot;\n","import React from 'react';\nimport { ResponsiveOrdinalFrame } from 'semiotic';\nimport { Vivid } from 'cartocolor';\n\nimport '../styles/Chart.css';\n\nimport { createScales } from './utils.js';\n\nconst BarChart = (props) => {\n  const { colorscale } = createScales(props.data, Vivid, props.colorVar, props.colorVar === 'category');\n  const fmt = props.numFmt || ((d) => d);\n\n  const labels = props.data.map((d) => ({\n    label: fmt(d[props.rAccess]),\n    [props.oAccess]: d[props.oAccess],\n    [props.rAccess]: d[props.rAccess],\n    type: 'bar-label'\n  }));\n\n  return (\n    <div className='Chart'>\n      <ResponsiveOrdinalFrame\n        data={ props.data }\n        margin={ { top: 10, right: 10, bottom: 10, left: 120 } }\n        oAccessor={ props.oAccess }\n        rAccessor={ props.rAccess }\n        type='bar'\n        oPadding={ 8 }\n        oLabel={ true }\n        projection='horizontal'\n        style={ (d) => ({\n          fill: colorscale(d[props.colorVar]),\n          stroke: 'white',\n          strokeWidth: '1px',\n          opacity: 0.8\n        }) }\n\n        annotations={ labels }\n        svgAnnotationRules={ (d) => lblRules(d, props.oAccess, props.rAccess, fmt) }\n        responsiveWidth={ true }\n        pieceHoverAnnotation={ [{\n          // type: 'desaturation-layer'\n        }, {\n          type: 'highlight',\n          style: (d) => ({\n            opacity: 1.0,\n            stroke: '#444'\n          })\n        }] }\n\n      />\n    </div>\n  );\n};\n\n\nconst IdxBarChart = (props) => {\n  const rAccess = props.vs[0];\n  const oAccess = rAccess === 'community' ? 'name': 'group';\n  const colorVar = rAccess === 'community' ? 'level' : 'category';\n\n  return (\n    <BarChart\n      data={ props.data }\n      oAccess={ oAccess }\n      rAccess={ rAccess }\n      colorVar={ colorVar }\n    />\n  );\n};\n\nconst QBarChart = (props) => {\n  return (\n    <BarChart\n      data={ props.data }\n      oAccess={ 'group' }\n      rAccess={ props.vs[0] }\n      colorVar={ 'category' }\n      numFmt={ props.numFmt }\n    />\n  );\n};\n\n////////// labels\n\n////// check width of bar; if under some amount, positive dx and dark label\nconst lblRules = ({ screenCoordinates, d }, oAccess, rAccess, fmt) => {\n  if (d.type === 'bar-label') {\n    const missing = isNaN(screenCoordinates[0]);\n    const coords = missing ? [0, screenCoordinates[1]] : screenCoordinates;\n    const small = coords[0] < 30;\n    return (\n      <g\n        className={ `direct-label ${ small ? 'dark' : 'light' }` }\n        key={ `lbl-${ d[oAccess] }` }\n        transform={ `translate(${ coords })` }\n      >\n        <text x={ 0 } y={ 0 } dx={ small ? '1.4em' : '-0.3em' } dy={ 3 }>{ fmt(d[rAccess]) }</text>\n      </g>\n    )\n  } else {\n    return null;\n  }\n};\n\nexport { IdxBarChart, QBarChart };\n","import React from 'react';\nimport { Form, Col, Row } from 'react-bootstrap';\nimport { useFormContext } from 'react-hook-form';\nimport { cleanIdxLabels, cleanHdrLabels, getComparables } from './utils.js';\n\nimport '../styles/Controls.css';\n\nconst ScoreMainControls = (props) => {\n  const { register } = useFormContext();\n\n  return (\n    <div className='Controls'>\n      <Form>\n        <Row>\n          <Col>\n            <Form.Group controlId='v1Select'>\n              <Form.Label>Index values by group</Form.Label>\n              <Form.Control as='select' name='v1Select' className='custom-select' ref={ register } onChange={ props.onChange }>\n                { props.variables.map((d, i) => (\n                  <option key={ d + 'v1opt' } value={ d }>{ cleanIdxLabels(d) }</option>\n                )) }\n              </Form.Control>\n            </Form.Group>\n            <Form.Group controlId='regSelect'>\n              <Form.Label>Filter region</Form.Label>\n              <Form.Control as='select' name='regSelect' className='custom-select' ref={ register } onChange={ props.onChange }>\n                { props.regions.map((d, i) => (\n                  <option key={ d + 'regopt' } value={ d }>{ d }</option>\n                )) }\n              </Form.Control>\n            </Form.Group>\n          </Col>\n        </Row>\n      </Form>\n    </div>\n  );\n};\n\nconst ScoreCompareControls = (props) => {\n  const { register } = useFormContext();\n  const yvariables = getComparables(props.variables);\n\n  return (\n    <div className='Controls'>\n      <Form>\n        <Row>\n          <Col>\n            <Form.Group controlId='v2Select'>\n              <Form.Label>Compare { cleanHdrLabels(props.v1, false) } to a second index</Form.Label>\n              <Form.Control as='select' name='v2Select' className='custom-select' ref={ register }  onChange={ props.onChange }>\n                { yvariables.map((d, i) => (\n                  <option key={ d + 'v2opt' } value={ d }>{ cleanIdxLabels(d) }</option>\n                )) }\n              </Form.Control>\n            </Form.Group>\n          </Col>\n        </Row>\n      </Form>\n    </div>\n  );\n};\n\nconst SparkControls = (props) => (\n  <div className='Controls SparkControls float-right'>\n    <Form.Check\n      inline\n      custom\n      // default\n      checked={ props.checked }\n      id='show-spark-bars'\n      name='sparkToggle'\n      onChange={ props.onChange }\n      label='Show data bars'\n    />\n  </div>\n);\n\nconst SurveyTopicFragment = (props) => (\n  <React.Fragment>\n    <Form.Group controlId='topicSelect'>\n      <Form.Label>Select a topic</Form.Label>\n      <Form.Control as='select' name='topicSelect' className='custom-select' ref={ props.register } onChange={ props.onChange }>\n        { props.topics.map((d, i) => (\n          <option key={ d + 'topicopt' } value={ d }>{ cleanHdrLabels(d) }</option>\n        )) }\n      </Form.Control>\n    </Form.Group>\n\n    <Form.Group controlId='qSelect'>\n      <Form.Label>Select survey question</Form.Label>\n      <Form.Control as='select' name='qSelect' className='custom-select' ref={ props.register } onChange={ props.onChange }>\n        { props.topicMeta.map((d, i) => (\n          <option key={ d.indicator + 'qopt' } value={ d.indicator }>{ d.display }</option>\n        )) }\n      </Form.Control>\n    </Form.Group>\n  </React.Fragment>\n);\n\nconst SurveyMainControls = (props) => {\n  const { register } = useFormContext();\n\n  return (\n    <div className='Controls'>\n      <Form>\n        <Row>\n          <Col>\n            <Form.Group controlId='regSelect'>\n              <Form.Label>Filter region</Form.Label>\n              <Form.Control as='select' name='regSelect' className='custom-select' ref={ register } onChange={ props.onChange }>\n                { props.regions.map((d, i) => (\n                  <option key={ d + 'regopt' } value={ d }>{ d }</option>\n                )) }\n              </Form.Control>\n            </Form.Group>\n\n            <SurveyTopicFragment { ...props } register={ register } />\n          </Col>\n        </Row>\n      </Form>\n    </div>\n  );\n};\n\nconst SurveyProfileControls = (props) => {\n  const { register } = useFormContext();\n  const categories = Object.keys(props.groups);\n\n  return (\n    <div className='Controls'>\n      <Form>\n        <Row>\n          <Col>\n            <Form.Group controlId='grpSelect'>\n              <Form.Label>Select a group</Form.Label>\n              <Form.Control as='select' name='grpSelect' className='custom-select' ref={ register } onChange={ props.onChange }>\n                {\n                  categories.map((d, i) => (\n                    <optgroup label={ d } key={ d + 'optgrp' }>\n                      { props.groups[d].map((e, j) => (\n                        <option value={ e } key={ j + 'grp' }>{ e }</option>\n                      )) }\n                    </optgroup>\n                  ))\n                }\n              </Form.Control>\n            </Form.Group>\n          </Col>\n        </Row>\n      </Form>\n    </div>\n  )\n};\n\nconst RiskMainControls = (props) => {\n  const { register } = useFormContext();\n\n  return (\n    <div className='Controls'>\n      <Form>\n        <Row>\n          <Col>\n            <SurveyTopicFragment { ...props } register={ register } />\n          </Col>\n        </Row>\n      </Form>\n    </div>\n  )\n};\n\n\n// export default Controls;\nexport { ScoreMainControls, ScoreCompareControls, SurveyMainControls, SurveyProfileControls, SparkControls, RiskMainControls };\n","import React from 'react';\n\nexport const NoteContext = React.createContext({\n  noteOpen: true,\n  handleClose: () => {  }\n});\n","import React from 'react';\nimport { Alert } from 'react-bootstrap';\nimport ReactMarkdown from 'react-markdown';\nimport { NoteContext } from './NoteContext.js';\n\nimport '../styles/Intro.css';\n\nconst Intro = (props) => (\n  <NoteContext.Consumer>\n    {\n      ({ noteOpen, handleClose }) => (\n        <div className='Intro'>\n          {noteOpen && <Alert variant='info' dismissible onClose={ handleClose } className='border border-color-info'>\n            <Alert.Heading>A note from DataHaven</Alert.Heading>\n            <ReactMarkdown source={ props.intro['covid'] } escapeHtml={ false } />\n          </Alert>}\n\n          <Alert variant='light' className='border border-color-dark'>\n            <ReactMarkdown source={ props.intro[props.page] } />\n            <p>For more information, visit DataHaven's <a href=\"http://www.ctdatahaven.org/communities\">Communities</a> page or <a href=\"http://www.ctdatahaven.org\">main website</a>.</p>\n          </Alert>\n        </div>\n      )}\n  </NoteContext.Consumer>\n);\n\nexport default Intro;\n","import React from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nimport { cleanHdrLabels, tblColumns, fmt, getMaxes } from './utils.js';\n\nimport '../styles/DataTable.css';\n\nconst DataTable = ({ data, v1, meta, spark, sort }) => {\n  const isCommunity = v1 === 'community';\n  const mightOmit = isCommunity ? ['group'] : ['name'];\n  const omit = ['level', 'category', 'region', ...mightOmit];\n\n  // colnames of what will be displayed\n  const colNames = tblColumns(data[0], omit);\n  const maxes = getMaxes(data);\n\n  const cols = colNames.map((col, i) => {\n    let formatter;\n    const isNumber = meta[col] !== undefined;\n    if (isNumber) {\n      if (spark) {\n        formatter = makeSpark(meta[col], col, maxes);\n      } else {\n        formatter = fmt(meta[col]);\n      }\n    } else {\n      formatter = null;\n    }\n    return {\n      dataField: col,\n      text: cleanHdrLabels(col),\n      sort: sort,\n      type: (isNumber ? 'number' : 'string'),\n      classes: (!isNumber ? 'position-sticky' : null),\n      headerClasses: (!isNumber ? 'position-sticky' : null),\n      formatter: formatter,\n      formatExtraData: spark,\n      align: (spark || !isNumber ? 'left' : 'right')\n    };\n  });\n\n  return (\n    <div className='DataTable' id='datatable'>\n      <BootstrapTable\n        bootstrap4\n        hover\n        condensed\n        classes='table-responsive-xl'\n        headerClasses='thead-light'\n        bordered={ true }\n        keyField={ isCommunity ? 'name' : 'group' }\n        data={ data }\n        columns={ cols }\n      />\n    </div>\n  )\n};\n\n\nconst makeSpark = (format, col, maxes) => (cell, row, rowIndex, extraData) => {\n  const max = maxes[col];\n  const scaled = (cell / max) * 100;\n  const w = cell ? (scaled + '%') : 0;\n  return (\n    <div className='spark' style={{ width: w }}>\n      <span className='sparktext'>{ fmt(format)(cell) }</span>\n    </div>\n  )\n};\n\nexport default DataTable;\n","import React, { useState } from 'react';\n\nimport { Container, Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\n\nimport { ChartStage, TableStage } from './Stage';\nimport Scatterplot from './Scatterplot';\nimport { IdxBarChart } from './BarChart';\nimport { ScoreMainControls, ScoreCompareControls, SparkControls } from './Controls';\nimport Intro from './Intro';\nimport DataTable from './DataTable';\nimport { getVariables, getRegions, filterForScatter, filterForBar, cleanIdxLabels } from '../components/utils.js';\n\nimport '../styles/Dash.css';\n\n\nconst Scores = ({ index_data, index_comps, meta, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const variables = getVariables(index_data);\n  const initValues = {\n    v1: variables[0],\n    v2: variables[1],\n    region: 'Connecticut'\n  };\n\n// state\n  const [v1, setV1] = useState(initValues.v1);\n  const [v2, setV2] = useState(initValues.v2);\n  const [region, setRegion] = useState(initValues.region);\n  const [spark, setSpark] = useState(true);\n\n// event handling\n  const onFormChange = (data, e) => {\n    const { v1Select, v2Select, regSelect } = formMethods.getValues();\n    setV1(v1Select);\n    setV2(v2Select);\n    setRegion(regSelect);\n  };\n  const onToggleChange = (e) => {\n    setSpark(e.target.checked);\n  };\n\n  return (\n    <div className='Dash Scores'>\n      <Container>\n        <header className=\"App-header\">\n          <h1>DataHaven Index scores</h1>\n        </header>\n\n        <Row><Intro page='scores' intro={ intro } /></Row>\n\n        <header className='App-header'>\n          <h2>How do groups and towns compare?</h2>\n        </header>\n        <Row className='align-items-end'>\n          <Col md={ 6 }>\n            <FormContext { ...formMethods }>\n              <ScoreMainControls\n                onChange={ formMethods.handleSubmit(onFormChange) }\n                variables={ variables }\n                regions={ getRegions(index_data) }\n                v1={ v1 }\n              />\n            </FormContext>\n\n            { /* bar chart */ }\n            <ChartStage\n              vs={ [v1, v2] }\n              region={ region }\n              lbls={ [cleanIdxLabels(v1)] }\n              type='bar'\n              dataBy={ v1 === 'community' ? 'location' : 'group' }\n              axisLbl={ 'Scores 0 (worse) through 1,000 (better)' }\n            >\n              <IdxBarChart\n                data={ filterForBar(index_data, region, v1) }\n                vs={ [v1] }\n              />\n            </ChartStage>\n          </Col>\n\n          <Col md={ 6 } className='second'>\n            <FormContext { ...formMethods }>\n              <ScoreCompareControls\n                onChange={ formMethods.handleSubmit(onFormChange) }\n                variables={ variables }\n                v1={ v1 }\n                v2={ v2 }\n              />\n            </FormContext>\n\n            { /* scatterplot */ }\n            <ChartStage\n              vs={ [v1, v2] }\n              region={ region }\n              lbls={ [v1, v2].map((d) => cleanIdxLabels(d)) }\n              type='scatter'\n              axisLbl={ 'Scores 0 (worse) through 1,000 (better)' }\n            >\n              <Scatterplot\n                data={ filterForScatter(index_data, region) }\n                vs={ [v1, v2] }\n              />\n            </ChartStage>\n          </Col>\n        </Row>\n\n        <hr />\n\n        <Row>\n          <Col>\n            <h2>What are these scores made of?</h2>\n\n            <TableStage\n              v1={ v1 }\n              region={ region }\n              type='table'\n              lbls={ [cleanIdxLabels(v1)] }\n              dataBy={ v1 === 'community' ? 'location' : 'group' }\n              hdrComponents={ <SparkControls checked={ spark } onChange={ onToggleChange } /> }\n            >\n              <DataTable v1={ v1 } meta={ meta[v1] }\n                data={ filterForBar(index_comps[v1], region, v1) }\n                spark={ spark }\n                sort={ true }\n              />\n            </TableStage>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n\nexport default Scores;\n","import React from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nimport '../styles/Profile.css';\n\nconst Profile = (props) => {\n  const cols = props.cols || ['Indicator', 'Value'];\n  const columns = [{\n    dataField: 'indicator',\n    text: cols[0],\n    sort: false,\n    headerStyle: () => ({ width: '80%' })\n  }, {\n    dataField: 'value',\n    text: cols[1],\n    sort: false,\n    align: 'right',\n    // formatter: fmt('0.0%'),\n    classes: 'text-right',\n    headerStyle: () => ({ width: '20%' })\n  }];\n\n  return (\n    <div className='Profile DataTable' id='profile'>\n      <BootstrapTable\n        bootstrap4\n        classes='table-responsive-sm'\n        headerClasses='thead-light'\n        bordered={ true }\n        keyField={ 'indicator' }\n        data={ props.data }\n        columns={ columns }\n      />\n    </div>\n  )\n};\n\nexport default Profile;\n","import React, { useState } from 'react';\n\nimport { Container, Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\n\nimport { ChartStage, TableStage } from './Stage';\nimport { QBarChart } from './BarChart';\nimport { SurveyMainControls, SurveyProfileControls } from './Controls';\nimport Intro from './Intro';\nimport Profile from './Profile';\nimport { cleanHdrLabels, getQMeta, getProfile, getNestedGrps, fmt } from '../components/utils.js';\n\nconst Survey = ({ cws_data, meta, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const topics = Object.keys(meta);\n  const regions = Object.keys(cws_data);\n\n  const initValues = {\n    region: regions[0],\n    topic: topics[0],\n    indicator: meta[topics[0]][0].indicator,\n    group: 'Total'\n  };\n\n// state\n  const [region, setRegion] = useState(initValues.region);\n  const [topic, setTopic] = useState(initValues.topic);\n  const [indicator, setIndicator] = useState(initValues.indicator);\n  const [group, setGroup] = useState(initValues.group);\n\n// event handling\n  const onChange = (data, e) => {\n    const { regSelect, topicSelect, qSelect, grpSelect } = formMethods.getValues();\n\n    // don't like setting state like this but oh well\n    const q0 = meta[topicSelect][0].indicator;\n    const g0 = initValues.group;\n    if (e.target.name === 'topicSelect' || e.target.name === 'regSelect') {\n      formMethods.setValue('qSelect', q0);\n      formMethods.setValue('grpSelect', g0);\n      setIndicator(q0);\n      setGroup(g0);\n    } else {\n      setIndicator(qSelect);\n      setGroup(grpSelect);\n    }\n    setRegion(regSelect);\n    setTopic(topicSelect);\n\n  };\n\n  const qDisplay = getQMeta(meta[topic], indicator) || '';\n  const groups = getNestedGrps(cws_data[region][topic]);\n  const profileData = getProfile(cws_data[region][topic], 'group', group, meta[topic]);\n\n  return (\n    <div className='Dash Survey'>\n      <Container>\n        <header className=\"App-header\">\n          <h1>2018 Community Wellbeing Survey</h1>\n        </header>\n\n\n        <Row><Intro page='survey' intro={ intro } /></Row>\n\n        <Row className=''>\n          <Col md={ 6 }>\n            <FormContext { ...formMethods }>\n              <SurveyMainControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                topics={ topics }\n                regions={ regions }\n                topicMeta={ meta[topic] }\n              />\n            </FormContext>\n          </Col>\n          <Col md={ 6 }>\n\n          </Col>\n        </Row>\n\n        <Row>\n          <Col md={ 6 }>\n            { /* bar chart */ }\n            <ChartStage\n              vs={ [indicator] }\n              region={ region }\n              type='bar'\n              lbls={ [qDisplay.display] }\n              dataBy={ 'group' }\n              axisLbl={ qDisplay.denom }\n            >\n              <QBarChart\n                data={ cws_data[region][topic] }\n                vs={ [indicator] }\n                numFmt={ fmt('0.0%') }\n              />\n            </ChartStage>\n          </Col>\n\n          <Col md={ 6 } className='second'>\n            <FormContext { ...formMethods }>\n              <SurveyProfileControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                groups={ groups }\n                topicMeta={ meta[topic] }\n              />\n            </FormContext>\n            { /* profile */ }\n            <TableStage\n              style='ProfileStage'\n              group={ group }\n              type='profile'\n              lbls={ [cleanHdrLabels(topic)] }\n              axisLbl={ 'Share of adults' }\n            >\n              <Profile\n                data={ profileData }\n                topic={ topic }\n                meta={ meta[topic] }\n                cols={ ['Survey question', 'Value'] }\n              />\n            </TableStage>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n\nexport default Survey;\n","import React from 'react';\nimport { Map, TileLayer, GeoJSON } from 'react-leaflet';\nimport { getBounds, makeGeoJson, makeTooltip } from './utils.js';\n\nimport '../styles/Chart.css';\n\nexport default class Choropleth extends React.Component {\n  getStyle = (feature) => {\n    const name = feature.properties.name;\n    const fillColor = this.props.data[name] ? this.props.colorscale(this.props.data[name].value) : '#ccc';\n    return {\n      fillColor,\n      color: '#333',\n      weight: 0.5,\n      opacity: 1,\n      fillOpacity: 0.75\n    };\n  };\n\n  handleFeature = (feature, layer) => {\n    const name = feature.properties.name;\n    layer\n      .on('mouseover', this.featureHilite)\n      .on('mouseout', this.featureUnhilite);\n    layer.bindTooltip(() => (\n      makeTooltip(name, this.props.data[name] ? this.props.data[name].value : null, this.props.meta.format)),\n      { direction: 'top', offset: [0, -20], className: 'custom-tip' }\n    );\n  };\n\n  featureHilite = ({ target }) => {\n    target.setStyle({\n      fillOpacity: 0.95,\n      weight: 1\n    });\n\n  };\n  featureUnhilite = ({ target }) => {\n    target.setStyle({\n      fillOpacity: 0.75,\n      weight: 0.5\n    });\n  };\n\n  render() {\n    const bbox = getBounds(this.props.shape);\n    const geo = makeGeoJson(this.props.shape);\n\n    return (\n      <div className='Chart Choropleth'>\n        <Map\n          bounds={ bbox }\n          zoomSnap={ 0.5 }\n          zoomDelta={ 0.5 }\n          scrollWheelZoom={ false }\n        >\n          <TileLayer\n            url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.{ ext }\"\n            attribution='Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n            subdomains=\"abcd\"\n            minZoom={ 8 }\n            maxZoom={ 16 }\n            ext=\"png\"\n            opacity={ 0.4 }\n          />\n          <GeoJSON\n            key={ (feature) => feature.properties.name }\n            data={ geo }\n            style={ this.getStyle }\n            interactive={ true }\n            onEachFeature={ this.handleFeature }\n            onClick={ this.props.onClick }\n          />\n        </Map>\n      </div>\n    )\n  }\n}\n","import React, { useState } from 'react';\n\nimport { Container, Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\nimport { schemeBuPu as palette } from 'd3-scale-chromatic';\n\nimport { ChartStage, TableStage } from './Stage';\nimport { RiskMainControls } from './Controls';\nimport Intro from './Intro';\nimport Choropleth from './Choropleth';\nimport Profile from './Profile';\n\nimport { getQMeta, getMapData, makeChoroScale, cleanHdrLabels, getProfile } from './utils.js';\n\nconst Risks = ({ town_data, meta, shape, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const topics = Object.keys(meta);\n  const initValues = {\n    topic: topics[0],\n    indicator: meta[topics[0]][0].indicator\n  };\n\n  const towns = Object.keys(getMapData(town_data[initValues.topic], initValues.indicator));\n  // const towns = Object.keys(town_data[initValues.indicator][0]);\n  const [topic, setTopic] = useState(initValues.topic);\n  const [indicator, setIndicator] = useState(initValues.indicator);\n  const [town, setTown] = useState(towns[0]);\n\n  const onChange = (data, e) => {\n    const { topicSelect, qSelect } = formMethods.getValues();\n    const q0 = meta[topicSelect][0].indicator;\n    if (e.target.name === 'topicSelect') {\n      formMethods.setValue('qSelect', q0);\n      setIndicator(q0);\n    } else {\n      setIndicator(qSelect);\n    }\n    setTopic(topicSelect);\n  };\n\n  const onFeatureClick = ({ layer }) => {\n    setTown(layer.feature.properties.name);\n  };\n\n  const qDisplay = getQMeta(meta[topic], indicator) || '';\n  const mapData = getMapData(town_data[topic], indicator);\n  const profileData = getProfile(town_data[topic], 'name', town, meta[topic]);\n\n  return (\n    <div className='Dash Risks'>\n      <Container>\n        <header className='App-header'>\n          <h1>2018 Community Wellbeing Survey</h1>\n        </header>\n\n        <Row>\n          <Intro page='risks' intro={ intro } />\n        </Row>\n\n        <Row>\n          <Col md={ 6 }>\n            <FormContext { ...formMethods }>\n              <RiskMainControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                topics={ topics }\n                topicMeta={ meta[topic] }\n              />\n            </FormContext>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col md={ 6 }>\n            <ChartStage\n              type='map'\n              lbls={ [qDisplay.display] }\n              dataBy={ 'town' }\n              axisLbl={ qDisplay.denom }\n            >\n              <Choropleth\n                data={ mapData }\n                shape={ shape }\n                colorscale={ makeChoroScale(mapData, palette, 5) }\n                meta={ { format: '.0%' } }\n                onClick={ onFeatureClick }\n              />\n            </ChartStage>\n          </Col>\n          <Col md={ 6 } className='second'>\n            <TableStage\n              style='ProfileStage'\n              group={ town }\n              type='profile'\n              lbls={ [cleanHdrLabels(topic)] }\n              axisLbl={ qDisplay.denom }\n            >\n              <Profile\n                data={ profileData }\n                topic={ topic }\n                meta={ meta[topic] }\n                cols={ [ 'Survey question', 'Value' ] }\n              />\n            </TableStage>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  )\n};\n\nexport default Risks;\n","import React from 'react';\nimport { Row, Col, Container, Alert } from 'react-bootstrap';\nimport '../styles/Footer.css';\n\nconst Footer = (props) => {\n  const dl = `https://query.data.world/s/${ props.urls.slug }`;\n  return (\n    <div className='Footer'>\n      <Container>\n        <hr />\n        <Row>\n          <Col>\n            <Alert variant='light' className='border'>\n              <Alert.Heading >Download this data</Alert.Heading>\n              <p>\n                {`Download ${ props.display.toLowerCase() } data`} <a href={ dl }>here</a>, filter and analyze data online on <a href={ props.dw }>data.world</a> (requires free sign-up), or download/clone from <a href={ props.urls.github }>GitHub</a> (advanced users).\n              </p>\n\n              <p>For source and methodology information, see the <a href='https://ctdatahaven.org/reports'>2019 DataHaven Community Index reports.</a></p>\n            </Alert>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n\nexport default Footer;\n","import React, { useState } from 'react';\nimport { Switch, Route, Redirect, useLocation } from 'react-router-dom';\nimport { objToArray, filterByString, filterTownLvl } from './components/utils.js';\n\nimport './App.css';\n\nimport Header from './components/Header';\nimport Scores from './components/Scores';\nimport Survey from './components/Survey';\nimport Risks from './components/Risks';\nimport Footer from './components/Footer';\nimport { NoteContext } from './components/NoteContext.js';\n\n// to scores\nimport index_data from './data/index_scatterplot.json';\nimport index_comps from './data/index_components.json';\nimport score_meta from './data/score_meta.json';\n// to survey\nimport cws_data from './data/cws_indicators.json';\nimport cws_meta from './data/cws_meta.json';\nimport dl_meta from './data/downloads.json';\n// to risk by town\nimport town_data from './data/cws_health_by_town.json';\nimport town_topo from './data/town_topo.json';\n// intros\nimport intro_txt from './data/intro_text.json';\n\n\nconst hdrs = {\n  survey: 'Wellbeing indicators',\n  risks: 'Health risks by town',\n  scores: 'Index scores'\n};\n\nconst useDownload = () => {\n  const location = useLocation().pathname.substring(1);\n  return {\n    location: location,\n    urls: dl_meta[location],\n    dw: 'https://data.world/camille86/cws2018',\n    display: hdrs[location]\n  };\n};\n\nconst App = () => {\n  const download = useDownload();\n  const [noteOpen, setNoteOpen] = useState(true);\n  const handleClose = () => {\n    setNoteOpen(false);\n  };\n\n  return (\n    <div className=\"App\">\n      <Header hdrs={ objToArray(hdrs, 'location', 'title') } />\n\n      <Switch>\n        <Route exact path='/' render={ () => <Redirect to='/survey' /> } />\n        <Route exact path='/survey'>\n          <NoteContext.Provider value={ { noteOpen, handleClose } }>\n            <Survey\n              cws_data={ cws_data }\n              meta={ cws_meta }\n              intro={ intro_txt }\n            />\n          </NoteContext.Provider>\n        </Route>\n        <Route exact path='/risks'>\n          <NoteContext.Provider value={ { noteOpen, handleClose } }>\n            <Risks\n              town_data={ town_data }\n              meta={ filterTownLvl(filterByString(cws_meta, 'health')) }\n              shape={ town_topo }\n              intro={ intro_txt }\n            />\n          </NoteContext.Provider>\n        </Route>\n        <Route exact path='/scores'>\n          <NoteContext.Provider value={ { noteOpen, handleClose } }>\n            <Scores\n              index_data={ index_data }\n              index_comps={ index_comps }\n              meta={ score_meta }\n              intro={ intro_txt }\n            />\n          </NoteContext.Provider>\n        </Route>\n      </Switch>\n      { download.location.length ? <Footer { ...download } /> : null }\n\n    </div>\n  );\n};\n\n//////////////////\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/stable';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'leaflet/dist/leaflet.css';\n// import './styles/bootstrap.min.css';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport './index.css';\n\nReactDOM.render(\n  <Router basename={ process.env.PUBLIC_URL + '/' }>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}