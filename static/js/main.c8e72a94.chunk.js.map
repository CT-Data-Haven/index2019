{"version":3,"sources":["utils/utils.js","utils/NoteContext.js","components/Intro.jsx","components/Footer.jsx","components/Dash.jsx","components/Tile.jsx","pages/Home.jsx","components/Stage.jsx","components/Legend.jsx","components/Tip.jsx","components/Scatterplot.jsx","components/BarChart.jsx","components/Controls.jsx","components/DataTable.jsx","pages/Scores.jsx","components/Profile.jsx","pages/Survey.jsx","components/Choropleth.jsx","pages/Risks.jsx","pages/Chime.jsx","pages/Internet.jsx","pages/Resources.jsx","components/Header.jsx","App.js","serviceWorker.js","index.js"],"names":["_filterByKey","data","key","value","first","_","cleanHdrLabels","lbl","hdr","cleanIdxLabels","fmt","fmtStr","d","undefined","format","getProfile","filterBy","filterVal","meta","profData","variable","compareCt","level","length","wide","m","val","indicator","display","filterForScatter","filterForBar","region","out","getMapData","vals","map","name","keyBy","getQMeta","getRegions","filter","uniq","RegExp","test","filterByString","string","matchKeys","keys","indexOf","compact","createScales","pals","rev","pal","n","groups","reverse","colorscale","scaleOrdinal","sizescale","makeChoroScale","scheme","nBrks","mapValues","values","sort","brks","ckmeans","slice","scaleThreshold","domain","range","makeTooltip","min","NoteContext","React","createContext","noteOpen","handleClose","Intro","props","Consumer","className","Alert","variant","Heading","Button","data-dismiss","aria-label","aria-controls","aria-expanded","onClick","Collapse","in","source","note","escapeHtml","id","text","href","Footer","footerTxt","urls","toLowerCase","dwdownload","dwsite","github","Container","Row","Col","Dash","intro","headline","children","LightCard","Card","LeftIcon","Provider","color","size","ariaHidden","RightIcon","Tile","tiles","df","i","Carousel","Item","Body","label","as","controls","interval","prevIcon","nextIcon","to","page","Home","hdrs","cards","xs","sm","md","Stage","type","versus","colon","comma","lblBy","lblBy2","Header","hdrComponents","flush","axisLbl","legendTypes","threshold","LegendThreshold","ordinal","LegendOrdinal","Legend","LegendByType","labelFormat","style","scale","Tip","lbls","tipLblr","vs","content","numFmt","hover","x","y","cx","cy","r","fillOpacity","strokeOpacity","stroke","fill","Scatterplot","xAccess","yAccess","palette","xRange","yRange","points","margin","top","right","bottom","left","xAccessor","yAccessor","pointStyle","opacity","xExtent","yExtent","axes","orient","baseline","tickFormat","responsiveWidth","hoverAnnotation","svgAnnotationRules","screenCoordinates","tooltipContent","match","join","substring","titleLabel","BarChart","rAccess","colorVar","labels","oAccess","oAccessor","rAccessor","oPadding","oLabel","projection","strokeWidth","renderKey","annotations","lblRules","pieceHoverAnnotation","customClickBehavior","IdxBarChart","QBarChart","coords","isNaN","small","transform","dx","dy","ControlHolder","Form","Ctrl","register","useFormContext","Group","controlId","Label","Control","ref","onChange","NestedCtrl","Object","e","SurveyMainControls","Fragment","regions","topics","GroupControls","ScoreMainControls","variables","ScoreCompareControls","concat","v1","SparkControls","Check","inline","custom","checked","RiskMainControls","indicators","ChimeMainControls","ages","InternetMainControls","makeSpark","col","maxes","cell","row","rowIndex","extraData","max","w","width","DataTable","spark","isCommunity","omit","colNames","difference","tblColumns","numberCols","pickBy","c","q","getMaxes","cols","formatter","isNumber","dataField","classes","headerClasses","formatExtraData","align","bootstrap4","condensed","bordered","keyField","columns","Scores","index_comps","formMethods","useForm","mode","flatMap","pull","getVariables","initValues","v2","useState","setV1","setV2","setRegion","setSpark","onFormChange","getValues","_v1","_v2","_region","handleSubmit","grouping","dataBy","target","Profile","headerStyle","Survey","topic","group","setTopic","setIndicator","setGroup","_topic","_indicator","_group","q0","g0","setValue","qDisplay","groupBy","getNestedGrps","profileData","denom","Choropleth","getStyle","feature","properties","fillColor","weight","handleFeature","layer","on","featureHilite","featureUnhilite","bindTooltip","direction","offset","setStyle","shp","bbox","geo","b","topojson","getBounds","this","shape","objects","town","Map","bounds","zoomSnap","zoomDelta","scrollWheelZoom","TileLayer","url","attribution","subdomains","minZoom","maxZoom","ext","GeoJSON","interactive","onEachFeature","Component","Risks","towns","setTown","mapData","Chime","age","setAge","filtered","nestedProf","k","ageData","toArray","getGrpProfile","_age","Internet","Resources","covid","datahaven","Navbar","expand","fixed","Toggle","Nav","onSelect","h","location","Link","eventKey","active","activePage","title","survey","risks","scores","chime","internet","resources","pages","p0","App","obj","pg","console","log","useLocation","history","useHistory","pathname","push","page_meta","usePageInfo","setNoteOpen","setActivePage","handlePage","v","exact","path","render","front","bytown","omitBy","town_topo","li","Boolean","window","hostname","ReactDOM","basename","process","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c8e72a94.chunk.js","sourcesContent":["import * as _ from 'lodash';\nimport { scaleOrdinal, scaleThreshold } from 'd3-scale';\nimport wordwrap from 'wordwrapjs';\nimport { format } from 'd3-format';\nimport * as topojson from 'topojson-client';\nimport { ckmeans } from 'simple-statistics';\n\n/////////////// general utilities\nconst _filterByKey = (data, key, value, first = true) => (\n  first ? _.find(data, { [key]: value }) : _.filter(data, { [key]: value })\n);\n\n/////////////// strings\nconst cleanHdrLabels = (lbl, first = true) => {\n  const hdr = _.replace(lbl, /_/g, ' ');\n  return first ? _.upperFirst(hdr) : _.startCase(hdr);\n};\n\nconst cleanIdxLabels = (lbl) => (\n  cleanHdrLabels(lbl, false) + ' Index'\n);\n\nconst cleanKeys = (obj, first = true) => (\n  _.chain(obj)\n    .keys()\n    .map((d) => cleanHdrLabels(d, first))\n    .value()\n);\n\nconst titleLabel = (lbl, n = 2) => (\n  _.upperFirst(lbl.substring(n))\n);\n\nconst wrapTspan = (txt) => (\n  wordwrap.lines(txt, { width: 15 })\n);\n\nconst compileHeader = (type) => {\n  const headers = {\n    versus: '<%= lbls[0] %> vs. <%= lbls[1] %>',\n    colon: '<%= lbl %>: <%= dataBy %>, <%= grouping %>',\n    comma: '<%= lbl %>, <%= grouping %>',\n    lblBy: '<%= lbl %> by <%= dataBy %>',\n    lblBy2: '<%= lbl %> by <%= dataBy %>, <%= grouping %>'\n  };\n  return _.template(headers[type]);\n};\n\nconst fmt = (fmtStr) => (\n  (d) => (d === null || d === undefined ? 'N/A' : format(fmtStr)(d))\n);\n\n/////////////// data munging\n\nconst getProfile = (data, filterBy, filterVal, meta, omit = null, variable = 'indicator', compareCt = false) => {\n  let profData;\n  if (compareCt) {\n    profData = _.filter(data, (d) => d[filterBy] === filterVal || d.level === 'state');\n  } else {\n    profData = _filterByKey(data, filterBy, filterVal, true);\n  }\n  if (profData.length === 0) {\n    return [];\n  } else {\n    const wide = _.map(meta, (m) => {\n    const format = m.format || '0.0%';\n    const val = fmt(format)(profData[m[variable]]);\n    return {\n      indicator: m.display,\n      value: val\n    };\n  });\n  return wide;\n  }\n  // const profData = _filterByKey(data, filterBy, filterVal, true);\n\n};\n\nconst getGrpProfile = (data, filterBy, filterVal, meta, indicator, omit = null) => {\n  const filtered = _.mapValues(data, (d) => _filterByKey(d, filterBy, filterVal, true));\n\n  const nestedProf = _.chain(meta)\n    .mapValues((m) => _filterByKey(m, 'indicator', indicator, true))\n    .mapValues((m, age) => {\n      const k = m.indicator;\n      const ageData = filtered[age] || { [filterBy]: filterVal, [k]: undefined };\n      const format = m.format || ',d';\n      const val = fmt(format)(ageData[k]);\n\n      return {\n        indicator: age,\n        value: val\n      };\n    })\n    .toArray()\n    .value();\n  return nestedProf;\n};\n\nconst filterForScatter = (data) => (\n  _filterByKey(data, 'category', 'Total', false)\n);\n\nconst filterForBar = (data, region, variable) => {\n  let out;\n  if (variable === 'community') {\n    if (region === 'Connecticut') {\n      out = _.filter(data, (d) => _.includes(['1_state', '2_region'], d.level));\n    } else {\n      out =  _.filter(data, (d) => _.includes([region, 'Connecticut'], d.region));\n    }\n    out = _.filter(out, { 'category': 'Total' });\n  } else {\n    out = _.filter(data, { 'name': region });\n  }\n  return out;\n};\n\nconst fillMissing = (data, variable) => (\n  _.map(data, (d) => {\n    if (_.keys(d).indexOf(variable) === -1) {\n      d[variable] = null;\n    }\n    return d;\n  })\n);\n\nconst getMapData = (data, indicator) => {\n  let vals;\n  if (data[0].level) {\n    vals = _filterByKey(data, 'level', 'town', false);\n  } else {\n    vals = data;\n  }\n  return (\n    _.chain(vals)\n      .map((d) => ({\n        name: d.name,\n        value: d[indicator]\n      }))\n      .keyBy('name')\n      .value()\n  );\n}\n\nconst filterTownLvl = (data) => (\n  _.chain(data)\n    .mapValues((v, k) => _.filter(v, (d) => d.bytown))\n    .omitBy(_.isEmpty)\n    .value()\n);\n\n/////////////// metadata\nconst getVariables = (data) => (\n  _.chain(data)\n    .flatMap(_.keys)\n    .uniq()\n    .pull('name', 'category', 'group', 'level', 'region')\n    .sort()\n    .reverse()\n    .value()\n);\n\nconst getSubVariables = (variables, v1) => (\n  _.without(variables, v1)\n);\n\nconst getComparables = (variables) => (\n  _.drop(variables, 1).concat(_.take(variables, 1))\n);\n\nconst getQMeta = (meta, indicator) => (\n  _filterByKey(meta, 'indicator', indicator, true)\n);\n\nconst getRegions = (data) => (\n  _.chain(data)\n    .filter((d) => _.includes(['1_state', '2_region'], d.level))\n    .map('name')\n    .uniq()\n    // .filter((d) => d.search(/(Inner|Outer) Ring/) === -1)\n    .filter((d) => !RegExp('(Inner|Outer) Ring').test(d))\n    .value()\n);\n\nconst getNestedGrps = (data) => (\n  _.chain(data)\n    .groupBy('category')\n    .mapValues((d) => _.map(d, 'group'))\n    .value()\n);\n\nconst tblColumns = (row, omit) => (\n  _.chain(row)\n    .keys()\n    .difference(omit)\n    .value()\n);\n\nconst objToArray = (obj, key, value) => {\n  return _.chain(obj)\n    .mapValues((v, k) => ({ [key]: k, [value]: v }))\n    .values()\n    .value();\n};\n\nconst filterByString = (meta, string) => {\n  const matchKeys = _.chain(meta)\n    .keys()\n    .map((d) => d.indexOf(string) >= 0 ? d : false)\n    .compact()\n    .value();\n  return _.pick(meta, matchKeys);\n};\n\n\n\n/////////////// viz\nconst createScales = (data, pals, variable, rev) => {\n  const n = _.size(pals);\n  const groups = _.chain(data)\n    .map(variable)\n    .uniq()\n    .value();\n  let pal;\n  if (rev) {\n    pal = _.takeRight(pals[n], groups.length).reverse();\n  } else {\n    pal = _.take(pals[n], groups.length);\n  }\n  // let pal = rev ? _.takeRight(pals[n], groups.length) : _.take(pals[n], groups.length);\n  const color = scaleOrdinal(groups, pal);\n  const rad = scaleOrdinal(groups, [8, 7, 5, 3, 3, 3]);\n  return { colorscale: color, sizescale: rad };\n};\n\nconst getMaxes = (data) => {\n  // const numberCols = _.pickBy(data[0], _.isNumber);\n  const numberCols = _.chain(data[0])\n    .pickBy(_.isNumber)\n    .keys()\n    .value();\n  return _.chain(numberCols)\n    .map((c) => ({\n      q: c,\n      max: _.chain(data).map(c).max().value()\n    }))\n    .keyBy('q')\n    .mapValues('max')\n    .value();\n};\n\nconst makeChoroScale = (data, scheme, nBrks) => {\n  const vals = _.chain(data)\n    .mapValues('value')\n    .values()\n    .compact()\n    .sort()\n    .value();\n  if (!vals.length) {\n    return scaleThreshold().domain([0, 1]).range(['#ccc']);\n  } else {\n    const brks = ckmeans(vals, nBrks).map((d) => d[0]).slice(1);\n\n    return scaleThreshold()\n      .domain(brks)\n      .range(scheme[nBrks]);\n  }\n};\n\nconst makeTooltip = (name, value, format, min = null) => {\n  if (min) {\n    const display = value === 0 ? '<' + fmt(format)(min) : fmt(format)(value);\n    return `${ name }: ${ display }`;\n  } else {\n    return `${ name }: ${ fmt(format)(value) }`;\n  }\n  // `${ name }: ${ fmt(format)(value) }`\n};\n\n/////////////////// geography\nconst getBounds = (geo) => {\n  const b = topojson.bbox(geo);\n  return [[ b[1], b[0] ], [ b[3], b[2] ]];\n};\n\nconst makeGeoJson = (shp) => (\n  topojson.feature(shp, shp.objects.town)\n);\n\n\nexport{\n\tcleanIdxLabels,\n\tcompileHeader,\n\tcreateScales,\n\tfilterForScatter,\n\tgetRegions,\n\tgetVariables,\n  cleanHdrLabels,\n  cleanKeys,\n  fillMissing,\n  filterByString,\n  filterForBar,\n  filterTownLvl,\n  fmt,\n  getBounds,\n  getComparables,\n  getGrpProfile,\n  getMapData,\n  getMaxes,\n  getNestedGrps,\n  getProfile,\n  getQMeta,\n  getSubVariables,\n  makeChoroScale,\n  makeGeoJson,\n  makeTooltip,\n  objToArray,\n  tblColumns,\n  titleLabel,\n  wrapTspan\n};\n","import React from 'react';\n\nexport const NoteContext = React.createContext({\n  noteOpen: true,\n  handleClose: () => {  }\n});\n","import React from 'react';\nimport { Alert, Button, Collapse } from 'react-bootstrap';\nimport ReactMarkdown from 'react-markdown';\nimport { NoteContext } from '../utils/NoteContext.js';\n\nimport '../styles/Intro.css';\n\nconst Intro = (props) => (\n  <NoteContext.Consumer>\n    {\n      ({ noteOpen, handleClose }) => (\n        <div className='Intro'>\n          { /* covid text block */ }\n          <Alert variant='warning' className='border border-color-warning'>\n            <Alert.Heading>\n              A note from DataHaven\n              <Button variant='link'\n                className='close text-uppercase'\n                data-dismiss='alert'\n                aria-label='Close note'\n                aria-controls='collapse-note'\n                aria-expanded={ noteOpen }\n                onClick={ handleClose }\n              >\n                { noteOpen ? 'hide' : 'show' }\n              </Button>\n            </Alert.Heading>\n            <Collapse in={ noteOpen }>\n              <ReactMarkdown source={ props.note } escapeHtml={ false } id='collapse-note' />\n            </Collapse>\n          </Alert>\n\n          { /* intro text block */ }\n          { props.text && <Alert variant='light' className='border border-color-dark'>\n            <ReactMarkdown source={ props.text } />\n            <p>For more information, see the other pages in the menu above, or visit DataHaven's <a href=\"http://www.ctdatahaven.org/communities\">Communities</a> page or <a href=\"http://www.ctdatahaven.org\">main website</a>.</p>\n          </Alert> }\n        </div>\n      )}\n  </NoteContext.Consumer>\n);\n\nexport default Intro;\n","import React from 'react';\nimport { Row, Col, Container, Alert } from 'react-bootstrap';\nimport '../styles/Footer.css';\n\nconst Footer = (props) => {\n  let footerTxt;\n  if (!props.urls) {\n    footerTxt = (\n      <p>Check back for downloads to become available.</p>\n    )\n  } else {\n    // const dl = `https://query.data.world/s/${ props.urls.slug }`;\n    // const display = props.display || '';\n    footerTxt = (\n      <p>\n        {`Download ${ props.display.toLowerCase() } data`} <a href={ props.urls.dwdownload }>here</a>, filter and analyze data online on <a href={ props.urls.dwsite }>data.world</a> (requires free sign-up), or download/clone from <a href={ props.urls.github }>GitHub</a> (advanced users).\n      </p>\n    );\n  }\n  return (\n    <div className='Footer'>\n      <Container>\n        <hr />\n        <Row>\n          <Col>\n            <Alert variant='light' className='border'>\n              <Alert.Heading >Downloads &amp; sources</Alert.Heading>\n              { footerTxt }\n\n              <p>Source: { props.source }. For detailed source and methodology information, see the <a href='https://ctdatahaven.org/reports'>2019 DataHaven Community Index reports.</a></p>\n            </Alert>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n};\n\nexport default Footer;\n","import React from 'react';\nimport { Container } from 'react-bootstrap';\nimport Intro from './Intro';\nimport Footer from './Footer';\n\nimport '../styles/Dash.css';\n\nconst Dash = (props) => (\n  <div className='Dash'>\n    <Container>\n      <header>\n        <h1>Connecticut Wellbeing and Equity Data App</h1>\n        <h2>{ props.intro ? props.intro.headline : ''  }</h2>\n      </header>\n      <Intro note={ props.note } { ...props.intro } />\n\n      { props.children }\n\n      {/* { props.download.location ? <Footer { ...props.download } /> : null } */}\n      { props.source && <Footer { ...props } /> }\n    </Container>\n  </div>\n);\n\nexport default Dash;\n","import React from 'react';\n\nimport { Carousel, Card, Col } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { IconContext } from 'react-icons';\nimport { FaAngleRight, FaAngleLeft } from 'react-icons/fa';\n\nconst Tile = (props) => {\n  const tiles = props.df.map((d, i) => (\n    <Carousel.Item>\n      <Card.Body className=''>\n        <div className='location'>{ d.name }</div>\n        <div className='mx-3'>\n          <div className='datapoint text-info'>{ d.value }</div>\n          <div className='datalbl'>{ props.label }</div>\n        </div>\n      </Card.Body>\n    </Carousel.Item>\n  ));\n\n  return (\n   <Col className='mt-3 mb-5'>\n     <div className='h-100'>\n       <Carousel\n         as={ LightCard }\n         controls={ true }\n         interval={ null }\n         prevIcon={ <LeftIcon /> }\n         nextIcon={ <RightIcon /> }\n       >\n         { tiles }\n       </Carousel>\n     </div>\n     <Card.Footer className='front-card-footer mt-auto'>\n       View <Link to={ '/' + props.page } onClick={ props.onClick }>{ props.hdr }</Link>\n     </Card.Footer>\n   </Col>\n  );\n};\n\nconst LightCard = (props) => (\n  <Card className='front-card bg-light h-100'>\n    { props.children }\n  </Card>\n);\n\nconst LeftIcon = () => (\n  <IconContext.Provider value={{ color: '#707f8f', size: '1.5em', ariaHidden: 'true' }}>\n    <FaAngleLeft />\n  </IconContext.Provider>\n);\nconst RightIcon = () => (\n  <IconContext.Provider value={{ color: '#707f8f', size: '1.5em', ariaHidden: 'true' }}>\n    <FaAngleRight />\n  </IconContext.Provider>\n);\n\nexport default Tile;\n","import React from 'react';\n\nimport { Row } from 'react-bootstrap';\nimport Tile from '../components/Tile';\n\nimport '../styles/Home.css';\n\nconst Home = ({ data, hdrs, onClick }) => {\n  const cards = data.map((d, i) => {\n    return (\n      <Tile key={ `tile-${ i }` } hdr={ hdrs[d.page] } onClick={ onClick } { ...d } />\n    )\n  });\n  return (\n    <div className='Home'>\n      <Row xs={ 1 } sm={ 2 } md={ 3 } className='d-flex flex-row align-items-stretch'>\n        { cards }\n      </Row>\n    </div>\n  );\n};\n\n\n\nexport default Home;\n","import React from 'react';\nimport { Card } from 'react-bootstrap';\n\nimport '../styles/Stage.css';\nimport { compileHeader } from '../utils/utils.js';\n\nconst Stage = (props) => {\n  const hdr = compileHeader(props.type)({ ...props });\n\n  return (\n    <div className='Stage'>\n      <Card>\n        <Card.Header as='h3'>\n          { hdr }\n          { props.hdrComponents || null }\n        </Card.Header>\n        <Card.Body className={ props.flush && 'p-0' }>\n          { props.children }\n        </Card.Body>\n        <Card.Footer className='text-right axis-title'>{ props.axisLbl || null }</Card.Footer>\n      </Card>\n    </div>\n  );\n};\n\nexport default Stage;\n","import React from 'react';\nimport { LegendThreshold, LegendOrdinal } from '@vx/legend';\nimport { fmt } from '../utils/utils.js';\n\nimport '../styles/Legend.css';\n\nconst legendTypes = {\n  threshold: LegendThreshold,\n  ordinal: LegendOrdinal\n};\n\nconst Legend = (props) => {\n  const LegendByType = legendTypes[props.type];\n  const format = props.labelFormat || ((label) => label ? fmt(props.format)(label) : '');\n  return (\n    <div className='Legend' style={ props.style }>\n      <LegendByType\n        labelFormat={ format }\n        scale={ props.scale }\n      />\n    </div>\n  );\n};\n\n\n\nexport default Legend;\n","import React from 'react';\n\nimport '../styles/Tooltip.css';\n\nconst Tip = (props) => {\n  const lbls = props.tipLblr ? props.vs.map(props.tipLblr) : props.vs;\n  const content = props.vs.map((d, i) => (\n    <div key={ `tip-div${ i }` }>\n      <p key={ `tip-p${ i }` }><span key={ `tip${ i }` }>{ lbls[i].length ? `${ lbls[i] }: ` : '' } </span>{ props.numFmt(props.data[d]) }</p>\n    </div>\n));\n\n  return (\n    <div className='Tooltip'>\n      <h5>{ props.data[props.hdr] }</h5>\n      { content }\n    </div>\n  );\n};\n\nexport default Tip;\n","import React from 'react';\nimport { ResponsiveXYFrame } from 'semiotic';\nimport { Vivid as palette } from 'cartocolor';\nimport * as _ from 'lodash';\n\nimport Legend from './Legend';\nimport Tip from './Tip';\nimport '../styles/Chart.css';\n\nimport { cleanIdxLabels, createScales, titleLabel } from '../utils/utils.js';\n\nconst Scatterplot = (props) => {\n  const [xAccess, yAccess] = props.vs;\n  const { colorscale, sizescale } = createScales(props.data, palette, 'level', false);\n\n  const xRange = [_.min(_.map(props.data, xAccess)), _.max(_.map(props.data, xAccess))];\n  const yRange = [_.min(_.map(props.data, yAccess)), _.max(_.map(props.data, yAccess))];\n  const pad = 0.05;\n  const margin = { top: 10, right: 10, bottom: 60, left: 80 };\n  const fmt = props.numFmt || ((d) => d);\n\n  return (\n    <div className='Chart Scatterplot'>\n      <ResponsiveXYFrame\n        points={ props.data }\n        margin={ margin }\n        size={ [600, 500] }\n        xAccessor={ xAccess }\n        yAccessor={ yAccess }\n        pointStyle={ (d) => ({\n          fill: colorscale(d.level),\n          stroke: colorscale(d.level),\n          r: sizescale(d.level),\n          opacity: 0.8\n        }) }\n        xExtent={ [xRange[0] * (1 - pad), xRange[1] * (1 + pad)] }\n        yExtent={ [yRange[0] * (1 - pad), yRange[1] * (1 + pad)] }\n        axes={[\n          { orient: 'left', label: cleanIdxLabels(yAccess), baseline: 'under', tickFormat: fmt },\n          { orient: 'bottom', label: cleanIdxLabels(xAccess), baseline: 'under', tickFormat: fmt }\n        ]}\n        responsiveWidth={ true }\n        // foregroundGraphics={ <Legend color={ colorscale } size={ sizescale } margin={ margin } /> }\n        hoverAnnotation={ [(d) => ({\n          type: 'frame-hover',\n          color: colorscale(d.level)\n        })] }\n        svgAnnotationRules={ ({ screenCoordinates, d }) => (d && d.type === 'frame-hover') ? hover(d, screenCoordinates[0], screenCoordinates[1], colorscale) : null }\n        tooltipContent={ (d) => (\n          <Tip data={ d.data } type='scatter'\n            vs={ props.vs }\n            hdr='name'\n            tipLblr={ (d) => cleanIdxLabels(d).match(/[A-Z]/g).join('') }\n            numFmt={ fmt }\n          />\n        ) }\n      />\n      <Legend\n        type='ordinal'\n        scale={ colorscale }\n        labelFormat={ (d) => titleLabel(d) }\n        style={{\n          right: '4px',\n          bottom: '45px'\n        }}\n      />\n    </div>\n  )\n};\n\n\nconst hover = (d, x, y, color) => (\n  <g key={ `${ hover }-tip` } className='hover-circle'>\n    <circle\n      cx={ x }\n      cy={ y }\n      r={ 12 }\n      fillOpacity={ 1.0 }\n      strokeOpacity={ 1.0 }\n      stroke={ color(d.level) }\n      fill={ color(d.level) }\n    ></circle>\n  </g>\n);\n\nexport default Scatterplot;\n","import React from 'react';\nimport { ResponsiveOrdinalFrame } from 'semiotic';\nimport { Vivid as palette } from 'cartocolor';\n\nimport '../styles/Chart.css';\n\nimport { createScales, fillMissing } from '../utils/utils.js';\n\nconst BarChart = (props) => {\n  fillMissing(props.data, props.rAccess);\n  const { colorscale } = createScales(props.data, palette, props.colorVar, props.colorVar === 'category');\n  const fmt = props.numFmt || ((d) => d);\n\n  const labels = props.data.map((d) => ({\n    label: fmt(d[props.rAccess]),\n    [props.oAccess]: d[props.oAccess],\n    [props.rAccess]: d[props.rAccess],\n    type: 'bar-label'\n  }));\n\n  return (\n    <div className='Chart'>\n      <ResponsiveOrdinalFrame\n        data={ props.data }\n        margin={ { top: 10, right: 10, bottom: 10, left: 120 } }\n        oAccessor={ props.oAccess }\n        rAccessor={ props.rAccess }\n        type='bar'\n        oPadding={ 8 }\n        oLabel={ true }\n        projection='horizontal'\n        style={ (d) => ({\n          fill: colorscale(d[props.colorVar]),\n          stroke: 'white',\n          strokeWidth: '1px',\n          opacity: 0.8\n        }) }\n        renderKey={ (d, i) => i }\n        annotations={ labels }\n        svgAnnotationRules={ (d) => lblRules(d, props.oAccess, props.rAccess, fmt) }\n        responsiveWidth={ true }\n        pieceHoverAnnotation={ [{\n          // type: 'desaturation-layer'\n        }, {\n          type: 'highlight',\n          style: (d) => ({\n            opacity: 1.0,\n            stroke: '#444'\n          })\n        }] }\n        customClickBehavior={ (d) => props.onClick(d) }\n      />\n    </div>\n  );\n};\n\n\nconst IdxBarChart = (props) => {\n  // const rAccess = props.v1;\n  const oAccess = props.rAccess === 'community' ? 'name': 'group';\n  const colorVar = props.rAccess === 'community' ? 'level' : 'category';\n\n  return (\n    <BarChart\n      data={ props.data }\n      oAccess={ oAccess }\n      rAccess={ props.rAccess }\n      colorVar={ colorVar }\n    />\n  );\n};\n\nconst QBarChart = (props) => {\n  return (\n    <BarChart\n      data={ props.data }\n      oAccess={ 'group' }\n      rAccess={ props.rAccess }\n      colorVar={ 'category' }\n      numFmt={ props.numFmt }\n      onClick={ props.onClick }\n    />\n  );\n};\n\n////////// labels\n\n////// check width of bar; if under some amount, positive dx and dark label\nconst lblRules = ({ screenCoordinates, d }, oAccess, rAccess, fmt) => {\n  if (d.type === 'bar-label') {\n    const missing = isNaN(screenCoordinates[0]);\n    const coords = missing ? [0, screenCoordinates[1]] : screenCoordinates;\n    const small = coords[0] < 30;\n    return (\n      <g\n        className={ `direct-label ${ small ? 'dark' : 'light' }` }\n        key={ `lbl-${ d[oAccess] }` }\n        transform={ `translate(${ coords })` }\n      >\n        <text x={ 0 } y={ 0 } dx={ small ? '1.4em' : '-0.3em' } dy={ 3 }>{ fmt(d[rAccess]) }</text>\n      </g>\n    )\n  } else {\n    return null;\n  }\n};\n\nexport { IdxBarChart, QBarChart };\n","import React from 'react';\nimport { Form, Col, Row } from 'react-bootstrap';\nimport { useFormContext } from 'react-hook-form';\nimport { cleanIdxLabels, cleanHdrLabels, getComparables } from '../utils/utils.js';\n\nimport '../styles/Controls.css';\n\n// controls:\n// region\n// topic\n// question\n// group\n// index\n// secondary\n// age group\n// condition\n\nconst ControlHolder = (props) => {\n  return (\n    <div className='Controls'>\n      <Form>\n        <Row>\n          <Col>\n            { props.children }\n          </Col>\n        </Row>\n      </Form>\n    </div>\n  );\n};\n\nconst Ctrl = (props) => {\n  const { register } = useFormContext();\n\n  return (\n    <Form.Group controlId={ props.name }>\n      <Form.Label>{ props.label || 'Select a ' + props.name.substring(1) }</Form.Label>\n      <Form.Control\n        as='select'\n        name={ props.name }\n        className='custom-select'\n        ref={ register }\n        onChange={ props.onChange }\n      >\n        { props.keys.map((d) => (\n          <option key={ (d.value || d) + props.name } value={ d.value || d }>\n            { d.display || cleanHdrLabels(d) }\n          </option>\n        )) }\n      </Form.Control>\n    </Form.Group>\n  );\n};\n\nconst NestedCtrl = (props) => {\n  const { register } = useFormContext();\n\n  return (\n    <Form.Group controlId={ props.name }>\n      <Form.Label>{ props.label || 'Select a ' + props.name.substring(1) }</Form.Label>\n      <Form.Control\n        as='select'\n        name={ props.name }\n        className='custom-select'\n        ref={ register }\n        onChange={ props.onChange }\n      >\n        { Object.keys(props.keys).map((d, i) => (\n          <optgroup label={ d } key={ i + 'optgrp' }>\n            { props.keys[d].map((e) => (\n              <option value={ e } key={ e + 'grp' }>{ e }</option>\n            )) }\n          </optgroup>\n        )) }\n      </Form.Control>\n    </Form.Group>\n  );\n};\n\nconst SurveyMainControls = (props) => (\n  <React.Fragment>\n    { /* region */ }\n    <Ctrl name='_region' keys={ props.regions } onChange={ props.onChange } />\n    { /* topic */ }\n    <Ctrl name='_topic' keys={ props.topics } onChange={ props.onChange } />\n    { /* question */ }\n    <Ctrl name='_indicator'\n      keys={ props.meta.map((d) => ({ value: d.indicator, display: d.display })) }\n      onChange={ props.onChange }\n      label='Select a survey question'\n    />\n  </React.Fragment>\n);\n\nconst GroupControls = (props) => (\n  <NestedCtrl name='_group' keys={ props.groups } onChange={ props.onChange } />\n);\n\nconst ScoreMainControls = (props) => (\n  <React.Fragment>\n    { /* region */ }\n    <Ctrl name='_region' keys={ props.regions } onChange={ props.onChange } />\n    { /* score */ }\n    <Ctrl name='_v1' keys={ props.variables } onChange={ props.onChange } label='Select an Index' />\n  </React.Fragment>\n);\n\nconst ScoreCompareControls = (props) => (\n  <Ctrl name='_v2'\n    keys={ getComparables(props.variables).map((d) => ({\n      value: d, display: cleanIdxLabels(d)\n    })) }\n    onChange={ props.onChange }\n    label={ `Compare ${ cleanHdrLabels(props.v1, false) } to a second index` }\n  />\n);\n\nconst SparkControls = (props) => (\n  <div className='Controls SparkControls float-right'>\n    <Form.Check\n      inline\n      custom\n      checked={ props.checked }\n      id='show-spark-bars'\n      name='sparkToggle'\n      onChange={ props.onChange }\n      label='Show data bars'\n    />\n  </div>\n);\n\nconst RiskMainControls = (props) => (\n  <React.Fragment>\n    { /* topic */ }\n    <Ctrl name='_topic' keys={ props.topics } onChange={ props.onChange } />\n    { /* question */ }\n    <Ctrl name='_indicator'\n      keys={ props.indicators.map((d) => ({ value: d.indicator, display: d.display })) }\n      onChange={ props.onChange }\n      label='Select a survey question'\n    />\n  </React.Fragment>\n);\n\nconst ChimeMainControls = (props) => (\n  <React.Fragment>\n    { /* condition */ }\n    <Ctrl name='_indicator'\n      keys={ props.indicators.map((d) => ({ value: d.indicator, display: d.display })) }\n      onChange={ props.onChange }\n      label='Select a condition'\n    />\n    { /* age */ }\n    <Ctrl name='_age' keys={ props.ages } onChange={ props.onChange } label='Select an age group' />\n  </React.Fragment>\n);\n\nconst InternetMainControls = (props) => (\n  <React.Fragment>\n    { /* indicator */ }\n    <Ctrl name='_indicator'\n      keys={ props.indicators.map((d) => ({ value: d.indicator, display: d.display })) }\n      onChange={ props.onChange }\n    />\n  </React.Fragment>\n);\n\nexport {\n  ScoreMainControls, ScoreCompareControls,\n  SurveyMainControls, GroupControls,\n  SparkControls,\n  RiskMainControls,\n  ChimeMainControls,\n  InternetMainControls,\n  ControlHolder\n};\n","import React from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nimport { cleanHdrLabels, tblColumns, fmt, getMaxes } from '../utils/utils.js';\n\nimport '../styles/DataTable.css';\n\nconst DataTable = ({ data, v1, meta, spark, sort }) => {\n  const isCommunity = v1 === 'community';\n  const mightOmit = isCommunity ? ['group'] : ['name'];\n  const omit = ['level', 'category', 'region', ...mightOmit];\n\n  // colnames of what will be displayed\n  const colNames = tblColumns(data[0], omit);\n  const maxes = getMaxes(data);\n\n  const cols = colNames.map((col, i) => {\n    let formatter;\n    const isNumber = meta[col] !== undefined;\n    if (isNumber) {\n      if (spark) {\n        formatter = makeSpark(meta[col].format, col, maxes);\n      } else {\n        formatter = fmt(meta[col].format);\n      }\n    } else {\n      formatter = null;\n    }\n    return {\n      dataField: col,\n      text: cleanHdrLabels(col),\n      sort: sort,\n      type: (isNumber ? 'number' : 'string'),\n      classes: (!isNumber ? 'position-sticky' : null),\n      headerClasses: (!isNumber ? 'position-sticky' : null),\n      formatter: formatter,\n      formatExtraData: spark,\n      align: (spark || !isNumber ? 'left' : 'right')\n    };\n  });\n\n  return (\n    <div className='DataTable' id='datatable'>\n      <BootstrapTable\n        bootstrap4\n        hover\n        condensed\n        classes='table-responsive-xl'\n        headerClasses='thead-light'\n        bordered={ true }\n        keyField={ isCommunity ? 'name' : 'group' }\n        data={ data }\n        columns={ cols }\n      />\n    </div>\n  )\n};\n\n\nconst makeSpark = (format, col, maxes) => (cell, row, rowIndex, extraData) => {\n  const max = maxes[col];\n  const scaled = (cell / max) * 100;\n  const w = cell ? (scaled + '%') : 0;\n  return (\n    <div className='spark' style={{ width: w }}>\n      <span className='sparktext'>{ fmt(format)(cell) }</span>\n    </div>\n  )\n};\n\nexport default DataTable;\n","import React, { useState } from 'react';\n\nimport { Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\n\nimport Stage from '../components/Stage';\nimport Scatterplot from '../components/Scatterplot';\nimport { IdxBarChart } from '../components/BarChart';\nimport { ControlHolder, ScoreMainControls, ScoreCompareControls, SparkControls } from '../components/Controls';\nimport DataTable from '../components/DataTable';\nimport { getVariables, getRegions, filterForScatter, filterForBar, cleanIdxLabels } from '../utils/utils.js';\n\nimport '../styles/Dash.css';\n\n\nconst Scores = ({ data, index_comps, meta, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const variables = getVariables(data);\n  const initValues = {\n    v1: variables[0],\n    v2: variables[1],\n    region: 'Connecticut'\n  };\n\n// state\n  const [v1, setV1] = useState(initValues.v1);\n  const [v2, setV2] = useState(initValues.v2);\n  const [region, setRegion] = useState(initValues.region);\n  const [spark, setSpark] = useState(true);\n\n// event handling\n  const onFormChange = (data, e) => {\n    const { _v1, _v2, _region } = formMethods.getValues();\n    setV1(_v1);\n    setV2(_v2);\n    setRegion(_region);\n  };\n\n  const onToggleChange = (e) => {\n    setSpark(e.target.checked);\n  };\n\n  return (\n    <div className='Scores'>\n      <Row className='align-items-end'>\n        <Col md={ 6 }>\n          <FormContext { ...formMethods }>\n            <ControlHolder>\n              <ScoreMainControls\n                onChange={ formMethods.handleSubmit(onFormChange) }\n                variables={ variables }\n                regions={ getRegions(data) }\n                // v1={ v1 }\n              />\n            </ControlHolder>\n          </FormContext>\n\n          { /* bar chart */ }\n          <Stage\n            type='lblBy2'\n            lbl={ cleanIdxLabels(v1) }\n            grouping={ region }\n            dataBy={ v1 === 'community' ? 'location' : 'group' }\n            axisLbl={ 'Scores 0 (worse) through 1,000 (better)' }\n          >\n            <IdxBarChart\n              data={ filterForBar(data, region, v1) }\n              rAccess={ v1 }\n            />\n          </Stage>\n        </Col>\n\n        <Col md={ 6 } className='second'>\n          <FormContext { ...formMethods }>\n            <ControlHolder>\n              <ScoreCompareControls\n                onChange={ formMethods.handleSubmit(onFormChange) }\n                variables={ variables }\n                v1={ v1 }\n                v2={ v2 }\n              />\n            </ControlHolder>\n          </FormContext>\n\n          { /* scatterplot */ }\n          <Stage\n            lbls={ [v1, v2].map((d) => cleanIdxLabels(d)) }\n            type='versus'\n            axisLbl={ 'Scores 0 (worse) through 1,000 (better)' }\n          >\n            <Scatterplot\n              data={ filterForScatter(data, region) }\n              vs={ [v1, v2] }\n            />\n          </Stage>\n        </Col>\n      </Row>\n\n      <hr />\n\n      <Row>\n        <Col>\n          <h3>What are these scores made of?</h3>\n\n          <Stage\n            grouping={ region }\n            type='lblBy2'\n            lbl={ 'Components of the ' + cleanIdxLabels(v1) }\n            dataBy={ v1 === 'community' ? 'location' : 'group' }\n            axisLbl={ v1 === 'community' ? '' : 'Share of adults' }\n            flush\n            hdrComponents={ <SparkControls checked={ spark } onChange={ onToggleChange } /> }\n          >\n            <DataTable v1={ v1 }\n              meta={ meta[v1] }\n              data={ filterForBar(index_comps[v1], region, v1) }\n              spark={ spark }\n              sort={ true }\n            />\n          </Stage>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Scores;\n","import React from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nimport '../styles/Profile.css';\n\nconst Profile = (props) => {\n  const cols = props.cols || ['Indicator', 'Value'];\n  const columns = [{\n    dataField: 'indicator',\n    text: cols[0],\n    sort: false,\n    headerStyle: () => ({ width: '80%' })\n  }, {\n    dataField: 'value',\n    text: cols[1],\n    sort: false,\n    align: 'right',\n    // formatter: fmt('0.0%'),\n    classes: 'text-right',\n    headerStyle: () => ({ width: '20%' })\n  }];\n\n  return (\n    <div className='Profile DataTable' id='profile'>\n      <BootstrapTable\n        bootstrap4\n        classes='table-responsive-sm'\n        headerClasses='thead-light'\n        bordered={ true }\n        keyField={ 'indicator' }\n        data={ props.data }\n        columns={ columns }\n      />\n    </div>\n  )\n};\n\nexport default Profile;\n","import React, { useState } from 'react';\n\nimport { Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\n\nimport Stage from '../components/Stage';\nimport { QBarChart } from '../components/BarChart';\nimport { ControlHolder, SurveyMainControls, GroupControls } from '../components/Controls';\nimport Profile from '../components/Profile';\nimport { cleanHdrLabels, getQMeta, getProfile, getNestedGrps, fmt } from '../utils/utils.js';\n\nconst Survey = ({ data, meta, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const topics = Object.keys(meta);\n  const regions = Object.keys(data);\n\n  const initValues = {\n    region: regions[0],\n    topic: topics[0],\n    indicator: meta[topics[0]][0].indicator,\n    group: 'Total'\n  };\n\n// state\n  const [region, setRegion] = useState(initValues.region);\n  const [topic, setTopic] = useState(initValues.topic);\n  const [indicator, setIndicator] = useState(initValues.indicator);\n  const [group, setGroup] = useState(initValues.group);\n\n// event handling\n  const onChange = (data, e) => {\n    const { _region, _topic, _indicator, _group } = formMethods.getValues();\n\n    // don't like setting state like this but oh well\n    const q0 = meta[_topic][0].indicator;\n    const g0 = initValues.group;\n    if (e.target.name === '_topic' || e.target.name === '_region') {\n      formMethods.setValue('_indicator', q0);\n      formMethods.setValue('_group', g0);\n      setIndicator(q0);\n      setGroup(g0);\n    } else {\n      setIndicator(_indicator);\n      setGroup(_group);\n    }\n    setRegion(_region);\n    setTopic(_topic);\n  };\n\n  const onClick = (d) => {\n    setGroup(d.group);\n  };\n\n  const qDisplay = getQMeta(meta[topic], indicator) || '';\n  const groups = getNestedGrps(data[region][topic]);\n  const profileData = getProfile(data[region][topic], 'group', group, meta[topic]);\n\n  return (\n    <div className='Survey'>\n      <Row>\n        <Col md={ 6 }>\n          <FormContext { ...formMethods }>\n            <ControlHolder>\n              <SurveyMainControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                topics={ topics }\n                regions={ regions }\n                meta={ meta[topic] }\n              />\n            </ControlHolder>\n          </FormContext>\n        </Col>\n        <Col md={ 6 }>\n\n        </Col>\n      </Row>\n\n      <Row>\n        <Col md={ 6 }>\n          { /* bar chart */ }\n          <Stage\n            type='lblBy2'\n            lbl={ qDisplay.display }\n            dataBy={ 'group' }\n            grouping={ region }\n            axisLbl={ qDisplay.denom }\n          >\n            <QBarChart\n              data={ data[region][topic] }\n              rAccess={ indicator }\n              numFmt={ fmt('0.0%') }\n              onClick={ onClick }\n            />\n          </Stage>\n        </Col>\n\n        <Col md={ 6 } className='second'>\n          <FormContext { ...formMethods }>\n            <ControlHolder>\n              <GroupControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                groups={ groups }\n                meta={ meta[topic] }\n              />\n            </ControlHolder>\n          </FormContext>\n          { /* profile */ }\n          <Stage\n            type='colon'\n            lbl={ cleanHdrLabels(topic) }\n            grouping={ region }\n            dataBy={ group }\n            axisLbl={ qDisplay.denom }\n            flush\n          >\n            <Profile\n              data={ profileData }\n              cols={ ['Survey question', 'Value'] }\n            />\n          </Stage>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Survey;\n","import React from 'react';\nimport { Map, TileLayer, GeoJSON } from 'react-leaflet';\nimport { getBounds, makeGeoJson, makeTooltip } from '../utils/utils.js';\nimport Legend from './Legend';\n\nimport '../styles/Chart.css';\n\nexport default class Choropleth extends React.Component {\n  getStyle = (feature) => {\n    const name = feature.properties.name;\n    const fillColor = this.props.data[name] && this.props.data[name].value !== undefined ? this.props.colorscale(this.props.data[name].value) : '#ccc';\n    return {\n      fillColor: fillColor,\n      color: '#333',\n      weight: 0.5,\n      opacity: 1,\n      fillOpacity: 0.75\n    };\n  };\n\n  handleFeature = (feature, layer) => {\n    const name = feature.properties.name;\n    layer\n      .on('mouseover', this.featureHilite)\n      .on('mouseout', this.featureUnhilite);\n    layer.bindTooltip(() => (\n      makeTooltip(name, this.props.data[name] ? this.props.data[name].value : null, this.props.meta.format, this.props.min)),\n      { direction: 'top', offset: [0, -20], className: 'custom-tip' }\n    );\n  };\n\n  featureHilite = ({ target }) => {\n    target.setStyle({\n      fillOpacity: 0.95,\n      weight: 1\n    });\n\n  };\n  featureUnhilite = ({ target }) => {\n    target.setStyle({\n      fillOpacity: 0.75,\n      weight: 0.5\n    });\n  };\n\n  render() {\n    const bbox = getBounds(this.props.shape);\n    const geo = makeGeoJson(this.props.shape);\n\n    return (\n      <div className='Chart Choropleth'>\n        <Map\n          bounds={ bbox }\n          zoomSnap={ 0.5 }\n          zoomDelta={ 0.5 }\n          scrollWheelZoom={ false }\n        >\n          <TileLayer\n            url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.{ ext }\"\n            attribution='Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n            subdomains=\"abcd\"\n            minZoom={ 8 }\n            maxZoom={ 16 }\n            ext=\"png\"\n            opacity={ 0.4 }\n          />\n          <GeoJSON\n            key={ (feature) => feature.properties.name }\n            data={ geo }\n            style={ this.getStyle }\n            interactive={ true }\n            onEachFeature={ this.handleFeature }\n            onClick={ this.props.onClick }\n          />\n        </Map>\n\n        <Legend\n          scale={ this.props.colorscale }\n          format={ this.props.meta.format }\n          type='threshold'\n          style={ {\n            right: 0,\n            bottom: 0\n          } }\n        />\n      </div>\n    )\n  }\n}\n","import React, { useState } from 'react';\n\nimport { Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\nimport { schemeBuPu as palette } from 'd3-scale-chromatic';\n\nimport Stage from '../components/Stage';\nimport { ControlHolder, RiskMainControls } from '../components/Controls';\nimport Choropleth from '../components/Choropleth';\nimport Profile from '../components/Profile';\n\nimport { getQMeta, getMapData, makeChoroScale, cleanHdrLabels, getProfile } from '../utils/utils.js';\n\nconst Risks = ({ data, meta, shape, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const topics = Object.keys(meta);\n  const initValues = {\n    topic: topics[0],\n    indicator: meta[topics[0]][0].indicator\n  };\n\n  const towns = Object.keys(getMapData(data[initValues.topic], initValues.indicator));\n  // const towns = Object.keys(data[initValues.indicator][0]);\n  const [topic, setTopic] = useState(initValues.topic);\n  const [indicator, setIndicator] = useState(initValues.indicator);\n  const [town, setTown] = useState(towns[0]);\n\n  const onChange = (data, e) => {\n    const { _topic, _indicator } = formMethods.getValues();\n    const q0 = meta[_topic][0].indicator;\n    if (e.target.name === '_topic') {\n      formMethods.setValue('_indicator', q0);\n      setIndicator(q0);\n    } else {\n      setIndicator(_indicator);\n    }\n    setTopic(_topic);\n  };\n\n  const onFeatureClick = ({ layer }) => {\n    setTown(layer.feature.properties.name);\n  };\n\n  const qDisplay = getQMeta(meta[topic], indicator) || '';\n  const mapData = getMapData(data[topic], indicator);\n  const profileData = getProfile(data[topic], 'name', town, meta[topic]);\n\n  return (\n    <div className='Risks'>\n      <Row>\n        <Col md={ 6 }>\n          <FormContext { ...formMethods }>\n            <ControlHolder>\n              <RiskMainControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                topics={ topics }\n                indicators={ meta[topic] }\n              />\n            </ControlHolder>\n          </FormContext>\n        </Col>\n      </Row>\n      \n      <Row>\n        <Col md={ 6 }>\n          <Stage\n            type='lblBy'\n            lbl={ qDisplay.display }\n            dataBy={ 'town' }\n            axisLbl={ qDisplay.denom }\n            flush\n          >\n            <Choropleth\n              data={ mapData }\n              shape={ shape }\n              colorscale={ makeChoroScale(mapData, palette, 5) }\n              meta={ { format: '.0%' } }\n              onClick={ onFeatureClick }\n            />\n          </Stage>\n        </Col>\n        <Col md={ 6 } className='second'>\n          <Stage\n            type='comma'\n            lbl={ cleanHdrLabels(topic) }\n            grouping={ town }\n            axisLbl={ qDisplay.denom }\n            flush\n          >\n            <Profile\n              data={ profileData }\n              cols={ [ 'Survey question', 'Value' ] }\n            />\n          </Stage>\n        </Col>\n      </Row>\n    </div>\n  )\n};\n\nexport default Risks;\n","import React, { useState } from 'react';\n\nimport { Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\nimport { schemeBuPu as palette } from 'd3-scale-chromatic';\n\nimport Stage from '../components/Stage';\nimport { ControlHolder, ChimeMainControls } from '../components/Controls';\nimport Choropleth from '../components/Choropleth';\nimport Profile from '../components/Profile';\n\nimport { getQMeta, getMapData, makeChoroScale, getGrpProfile } from '../utils/utils.js';\n\nconst Chime = ({ data, meta, shape, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const ages = Object.keys(meta);\n  const initValues = {\n    indicator: meta[ages[0]][0].indicator,\n    age: ages[0]\n  };\n\n  const towns = Object.keys(getMapData(data[initValues.age], initValues.indicator));\n  const [age, setAge] = useState(initValues.age);\n  const [indicator, setIndicator] = useState(initValues.indicator);\n  const [town, setTown] = useState(towns[0]);\n  // const [view, setView] = useState(initValues.view);\n\n  const onChange = (data, e) => {\n    const { _age, _indicator } = formMethods.getValues();\n    setIndicator(_indicator);\n    setAge(_age);\n  };\n\n  const onFeatureClick = ({ layer }) => {\n    setTown(layer.feature.properties.name);\n  };\n\n  const mapData = getMapData(data[age], indicator);\n  const profileData = getGrpProfile(data, 'name', town, meta, indicator, null);\n  const qDisplay = getQMeta(meta[age], indicator) || '';\n\n  return (\n    <div className='Chime'>\n      <Row>\n        <Col md={ 6 }>\n          <FormContext { ...formMethods }>\n            <ControlHolder>\n              <ChimeMainControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                ages={ ages }\n                indicators={ meta[age] }\n              />\n            </ControlHolder>\n          </FormContext>\n        </Col>\n      </Row>\n\n      <Row>\n        <Col md={ 6 }>\n          <Stage\n            type='lblBy2'\n            lbl={ qDisplay.display + ' hospital encounters' }\n            dataBy={ 'town' }\n            grouping={ age.toLowerCase() }\n            axisLbl={ 'Rate per 10,000 residents' }\n            flush\n          >\n            <Choropleth\n              data={ mapData }\n              shape={ shape }\n              colorscale={ makeChoroScale(mapData, palette, 5) }\n              meta={ { format: ',d' } }\n              onClick={ onFeatureClick }\n            />\n          </Stage>\n        </Col>\n        <Col md={ 6 } className='second'>\n          <Stage\n            type='lblBy2'\n            lbl={ qDisplay.display + ' encounters' }\n            dataBy={ 'age' }\n            grouping={ town }\n            axisLbl={ 'Rate per 10,000 residents' }\n            flush\n          >\n            <Profile\n              data={ profileData }\n              meta={ meta[age] }\n              cols={ ['Condition', 'Rate'] }\n            />\n          </Stage>\n        </Col>\n      </Row>\n    </div>\n  )\n};\n\nexport default Chime;\n","import React, { useState } from 'react';\n\nimport { Row, Col } from 'react-bootstrap';\nimport useForm, { FormContext } from 'react-hook-form';\nimport { schemeBuPu as palette } from 'd3-scale-chromatic';\n\nimport Stage from '../components/Stage';\nimport { ControlHolder, InternetMainControls } from '../components/Controls';\nimport Choropleth from '../components/Choropleth';\nimport Profile from '../components/Profile';\n\nimport { getQMeta, getMapData, makeChoroScale, getProfile } from '../utils/utils.js';\n\nconst Internet = ({ data, meta, shape, intro }) => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const initValues = {\n    indicator: meta[0].indicator\n  };\n  const towns = Object.keys(getMapData(data, initValues.indicator));\n  const [indicator, setIndicator] = useState(initValues.indicator);\n  const [town, setTown] = useState(towns[0]);\n\n  const onChange = (data, e) => {\n    const { _indicator } = formMethods.getValues();\n    setIndicator(_indicator);\n  };\n\n  const onFeatureClick = ({ layer }) => {\n    setTown(layer.feature.properties.name);\n  };\n\n  const qDisplay = getQMeta(meta, indicator) || '';\n  const mapData = getMapData(data, indicator);\n  const profileData = getProfile(data, 'name', town, meta);\n\n  return (\n    <div className='Internet'>\n      <Row>\n        <Col md={ 6 }>\n          <FormContext { ...formMethods }>\n            <ControlHolder>\n              <InternetMainControls\n                onChange={ formMethods.handleSubmit(onChange) }\n                indicators={ meta }\n              />\n            </ControlHolder>\n          </FormContext>\n        </Col>\n      </Row>\n\n      <Row>\n        <Col md={ 6 }>\n          <Stage\n            type='lblBy'\n            lbl={ qDisplay.display }\n            dataBy={ 'town' }\n            axisLbl={ qDisplay.denom }\n            flush\n          >\n            <Choropleth\n              data={ mapData }\n              shape={ shape }\n              colorscale={ makeChoroScale(mapData, palette, 5) }\n              meta={ { ...qDisplay } }\n              min={ 0.01 }\n              onClick={ onFeatureClick }\n            />\n          </Stage>\n        </Col>\n        <Col md={ 6 } className='second'>\n          <Stage\n            type='comma'\n            lbl={ 'Internet and computer access' }\n            grouping={ town }\n            axisLbl={ qDisplay.denom }\n            flush\n          >\n            <Profile\n              data={ profileData }\n              cols={ [ 'Indicator', 'Value' ] }\n            />\n          </Stage>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Internet;\n","import React from 'react';\nimport { Row, Col } from 'react-bootstrap';\n\nconst Resources = (props) => {\n  return (\n    <div className='Resources'>\n      <Row>\n        <Col>\n          <h3>COVID-19 information and resources</h3>\n          <ul>\n            { props.covid && props.covid.map((d, i) => (\n              <li key={ `covid-li-${ i }` }>\n                <a href={ d.url }>{ d.display }</a>\n              </li>\n            )) }\n          </ul>\n          <h3>General DataHaven resources</h3>\n          <ul>\n            { props.datahaven && props.datahaven.map((d, i) => (\n              <li key={ `dh-li-${ i }` }>\n                <a href={ d.url }>{ d.display }</a>\n              </li>\n            )) }\n          </ul>\n        </Col>\n      </Row>\n    </div>\n  )\n};\n\nexport default Resources;\n","import React from 'react';\nimport { Navbar, Nav } from 'react-bootstrap';\nimport { LinkContainer } from 'react-router-bootstrap';\n\nimport '../styles/Header.css';\n\nconst Header = (props) => (\n  <div className='Header'>\n    <Navbar expand='lg' variant='light'  fixed='top'>\n      <Navbar.Toggle aria-controls='basic-navbar-nav' />\n      <Navbar.Collapse id='basic-navbar-nav'>\n        <Nav variant='pills' onSelect={ props.onClick }>\n          { props.hdrs.map((h) => (\n            <LinkContainer to={ '/' + h.location } key={ `page-${ h.location }` }>\n              <Nav.Link\n                eventKey={ h.location }\n                active={ h.location === props.activePage }\n              >{ h.title }</Nav.Link>\n            </LinkContainer>\n          )) }\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  </div>\n);\n\nexport default Header;\n","import React, { useState } from 'react';\nimport { Switch, Route, Redirect, useLocation, useHistory } from 'react-router-dom';\nimport { objToArray, filterByString, filterTownLvl } from './utils/utils.js';\nimport Dash from './components/Dash';\n// import ErrorBoundary from './components/ErrorBoundary';\n\nimport './App.css';\n\nimport Home from './pages/Home';\nimport Scores from './pages/Scores';\nimport Survey from './pages/Survey';\nimport Risks from './pages/Risks';\nimport Chime from './pages/Chime';\nimport Internet from './pages/Internet';\nimport Resources from './pages/Resources';\n\nimport Header from './components/Header';\nimport { NoteContext } from './utils/NoteContext.js';\n\nimport data from './data/dash_data.json';\n// import front from './data/front_data.json';\nimport front from './data/front_data.json';\nimport meta from './data/meta.json';\nimport page_meta from './data/page_meta.json';\nimport town_topo from './data/town_topo.json';\n\n// constants\nconst hdrs = {\n  'home': 'Home',\n  survey: 'Wellbeing indicators',\n  risks: 'Health risks by town',\n  scores: 'Index scores',\n  chime: 'Hospital encounters',\n  internet: 'Internet access',\n  resources: 'Resources'\n};\n\nconst pages = Object.keys(hdrs);\nconst p0 = pages[0];\n\n// hooks\nconst usePageInfo = () => {\n  console.log(useLocation());\n  const history = useHistory();\n  const location = useLocation().pathname.substring(1);\n  if (location.length && pages.indexOf(location) === -1) {\n    history.push('/' + p0);\n  }\n  return {\n    location,\n    display: hdrs[location],\n    ...page_meta[location]\n  };\n};\n\nconst App = () => {\n  const pg = usePageInfo();\n\n  // state\n  const [noteOpen, setNoteOpen] = useState(true);\n  const [activePage, setActivePage] = useState('home');\n\n  // handlers\n  const handleClose = () => {\n    setNoteOpen(!noteOpen);\n  };\n\n  const handlePage = (page) => {\n    setActivePage(page);\n  };\n\n  // render\n  return (\n    <div className=\"App\">\n      <Header\n        hdrs={ objToArray(hdrs, 'location', 'title') }\n        onClick={ handlePage }\n        activePage={ activePage }\n      />\n\n      <NoteContext.Provider value={ { noteOpen, handleClose } }>\n        <Dash\n          note={ page_meta['covid'].intro.text }\n          { ...pg }\n        >\n          <Switch>\n            <Route exact path='/' render={ () => <Redirect to='/home' /> } />\n            <Route exact path='/home'>\n              <Home\n                data={ front }\n                hdrs={ hdrs }\n                onClick={ handlePage }\n              />\n            </Route>\n            <Route exact path='/survey'>\n              <Survey\n                data={ data['cws_indicators'] }\n                meta={ meta['cws'] }\n              />\n            </Route>\n            <Route exact path='/risks'>\n              <Risks\n                data={ data['cws_health_by_town'] }\n                meta={ filterTownLvl(filterByString(meta['cws'], 'health')) }\n                shape={ town_topo }\n              />\n            </Route>\n            <Route exact path='/scores'>\n              <Scores\n                data={ data['index_scatterplot'] }\n                index_comps={ data['index_components'] }\n                meta={ meta['score'] }\n              />\n            </Route>\n            <Route exact path='/chime'>\n              <Chime\n                data={ data['chime_data'] }\n                meta={ meta['chime'] }\n                shape={ town_topo }\n              />\n            </Route>\n            <Route exact path='/internet'>\n              <Internet\n                data={ data['internet'] }\n                meta={ meta['internet'] }\n                shape={ town_topo }\n              />\n            </Route>\n            <Route exact path='/resources'>\n              <Resources\n                { ...page_meta['resources'].li }\n              />\n            </Route>\n          </Switch>\n        </Dash>\n      </NoteContext.Provider>\n    </div>\n  );\n};\n\n//////////////////\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/stable';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './App';\n// import ErrorBoundary from './components/ErrorBoundary';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'leaflet/dist/leaflet.css';\n// import './styles/bootstrap.min.css';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport './index.css';\n\nReactDOM.render(\n\n    <Router basename={ process.env.PUBLIC_URL  }>\n      <App />\n    </Router>\n  ,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}